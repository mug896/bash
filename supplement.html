<!DOCTYPE HTML>
<html lang="ko" >
    
    <head>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-161001174-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'UA-161001174-1');
</script>

        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>별책부록 | Introduction</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="./styles/website.css">
    

        
    
    
    
    <link rel="prev" href="./closing.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="24"
        data-chapter-title="별책부록"
        data-filepath="supplement.md"
        data-basepath="."

        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="bug_reports.html">
            
                
                    <a href="./bug_reports.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Bug reports
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="basics.html">
            
                
                    <a href="./basics.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Basics
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1" data-path="quotes.html">
            
                
                    <a href="./quotes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                        Quotes
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="2.1.1" data-path="escape_sequences.html">
            
                
                    <a href="./escape_sequences.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.1.</b>
                        
                        Escape Sequences
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="2.2" data-path="variables.html">
            
                
                    <a href="./variables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                        Variables
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.3" data-path="functions.html">
            
                
                    <a href="./functions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                        Functions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.4" data-path="exit_status.html">
            
                
                    <a href="./exit_status.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                        Exit Status
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.5" data-path="pattern_matching.html">
            
                
                    <a href="./pattern_matching.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                        Pattern Matching
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.6" data-path="shebang.html">
            
                
                    <a href="./shebang.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.6.</b>
                        
                        #!
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.7" data-path="interactive_non-interactive.html">
            
                
                    <a href="./interactive_non-interactive.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.7.</b>
                        
                        Interactive vs Non-Interactive Shell
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.8" data-path="login_non-login.html">
            
                
                    <a href="./login_non-login.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.8.</b>
                        
                        Login vs Non-Login Shell
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2.9" data-path="etc.html">
            
                
                    <a href="./etc.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.9.</b>
                        
                        etc
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="3" data-path="test.html">
            
                
                    <a href="./test.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Test
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="test_operators.html">
            
                
                    <a href="./test_operators.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Operators
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="subshells.html">
            
                
                    <a href="./subshells.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        Subshells
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="process_creation.html">
            
                
                    <a href="./process_creation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Process Creation
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="commands.html">
            
                
                    <a href="./commands.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Commands
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1" data-path="builtin_commands.html">
            
                
                    <a href="./builtin_commands.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Builtin Commands
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.1.1" data-path="read.html">
            
                
                    <a href="./read.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.1.</b>
                        
                        read
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.1.2" data-path="printf.html">
            
                
                    <a href="./printf.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.2.</b>
                        
                        printf
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.1.3" data-path="eval.html">
            
                
                    <a href="./eval.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.3.</b>
                        
                        eval
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.1.4" data-path="getopts.html">
            
                
                    <a href="./getopts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.4.</b>
                        
                        getopts
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="keyword_commands.html">
            
                
                    <a href="./keyword_commands.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.</b>
                        
                        Keyword Commands
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="5.2.1" data-path="compound_commands.html">
            
                
                    <a href="./compound_commands.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.2.1.</b>
                        
                        Compound Commands
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5.3" data-path="special_commands.html">
            
                
                    <a href="./special_commands.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.3.</b>
                        
                        Special Commands
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.4" data-path="expr.html">
            
                
                    <a href="./expr.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.4.</b>
                        
                        expr
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.5" data-path="grep.html">
            
                
                    <a href="./grep.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.5.</b>
                        
                        grep
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.6" data-path="find.html">
            
                
                    <a href="./find.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.6.</b>
                        
                        find
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.7" data-path="xargs.html">
            
                
                    <a href="./xargs.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.7.</b>
                        
                        xargs
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="arrays.html">
            
                
                    <a href="./arrays.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        Arrays
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="7" data-path="metacharacters.html">
            
                
                    <a href="./metacharacters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                        Shell Metacharacters
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="precedence.html">
            
                
                    <a href="./precedence.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                        Precedence
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="expansions_and_substitutions.html">
            
                
                    <a href="./expansions_and_substitutions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                        Expansions and Substitutions
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="exp_and_sub/brace_expansion.html">
            
                
                    <a href="./exp_and_sub/brace_expansion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                        Brace Expansion
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.2" data-path="exp_and_sub/tilde_expansion.html">
            
                
                    <a href="./exp_and_sub/tilde_expansion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                        Tilde Expansion
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.3" data-path="exp_and_sub/parameter_expansion.html">
            
                
                    <a href="./exp_and_sub/parameter_expansion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                        Parameter Expansion
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.4" data-path="exp_and_sub/arithmetic_expansion.html">
            
                
                    <a href="./exp_and_sub/arithmetic_expansion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.4.</b>
                        
                        Arithmetic Expansion
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.5" data-path="exp_and_sub/command_substitution.html">
            
                
                    <a href="./exp_and_sub/command_substitution.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.5.</b>
                        
                        Command Substitution
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.6" data-path="exp_and_sub/process_substitution.html">
            
                
                    <a href="./exp_and_sub/process_substitution.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.6.</b>
                        
                        Process Substitution
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.7" data-path="exp_and_sub/word_splitting.html">
            
                
                    <a href="./exp_and_sub/word_splitting.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.7.</b>
                        
                        Word Splitting
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="8.8" data-path="exp_and_sub/filename_expansion.html">
            
                
                    <a href="./exp_and_sub/filename_expansion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>8.8.</b>
                        
                        Filename Expansion
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="job_control.html">
            
                
                    <a href="./job_control.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                        Job Control
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="session_and_process-group.html">
            
                
                    <a href="./session_and_process-group.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.1.</b>
                        
                        Session and Process Group
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="process_state_codes.html">
            
                
                    <a href="./process_state_codes.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.2.</b>
                        
                        Process State Codes
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.3" data-path="tty.html">
            
                
                    <a href="./tty.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.3.</b>
                        
                        TTY
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="9.4" data-path="mutual_exclusion.html">
            
                
                    <a href="./mutual_exclusion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>9.4.</b>
                        
                        Mutual Exclusion
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="redirections.html">
            
                
                    <a href="./redirections.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                        Redirections
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="file_descriptors.html">
            
                
                    <a href="./file_descriptors.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                        File Descriptors
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="here_document.html">
            
                
                    <a href="./here_document.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                        &lt;&lt; , &lt;&lt;&lt;
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="pipe.html">
            
                
                    <a href="./pipe.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                        Pipe
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.4" data-path="named_pipe.html">
            
                
                    <a href="./named_pipe.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.4.</b>
                        
                        Named Pipe
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="10.5" data-path="buffering.html">
            
                
                    <a href="./buffering.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>10.5.</b>
                        
                        Buffering
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="signals_and_traps.html">
            
                
                    <a href="./signals_and_traps.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Signals and Traps
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="11.1" data-path="kill.html">
            
                
                    <a href="./kill.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.1.</b>
                        
                        kill
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.2" data-path="trap.html">
            
                
                    <a href="./trap.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.2.</b>
                        
                        trap
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="11.3" data-path="signals_table.html">
            
                
                    <a href="./signals_table.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.3.</b>
                        
                        Signals Table
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="12" data-path="command_aliases.html">
            
                
                    <a href="./command_aliases.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                        Command Aliases
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="13" data-path="command_history.html">
            
                
                    <a href="./command_history.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>13.</b>
                        
                        Command History
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="14" data-path="command_completion.html">
            
                
                    <a href="./command_completion.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>14.</b>
                        
                        Command Completion
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="15" data-path="readline.html">
            
                
                    <a href="./readline.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>15.</b>
                        
                        Readline
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="16" data-path="colors_and_prompt.html">
            
                
                    <a href="./colors_and_prompt.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>16.</b>
                        
                        Colors and Prompt
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17" data-path="shell_variables.html">
            
                
                    <a href="./shell_variables.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.</b>
                        
                        Shell Variables
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="17.1" data-path="positional_parameters.html">
            
                
                    <a href="./positional_parameters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.1.</b>
                        
                        Positional Parameters
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="17.2" data-path="special_parameters.html">
            
                
                    <a href="./special_parameters.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>17.2.</b>
                        
                        Special Parameters
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="18" data-path="shell_options.html">
            
                
                    <a href="./shell_options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.</b>
                        
                        Shell Options
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="18.1" data-path="command_line_options.html">
            
                
                    <a href="./command_line_options.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>18.1.</b>
                        
                        Command-line options
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="19" data-path="debugging.html">
            
                
                    <a href="./debugging.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>19.</b>
                        
                        Debugging
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="20" data-path="locale.html">
            
                
                    <a href="./locale.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>20.</b>
                        
                        Locale
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="21" data-path="sh.html">
            
                
                    <a href="./sh.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>21.</b>
                        
                        sh
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="22" data-path="tips.html">
            
                
                    <a href="./tips.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>22.</b>
                        
                        Tips
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="23" data-path="closing.html">
            
                
                    <a href="./closing.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>23.</b>
                        
                        맺음말
                    </a>
            
            
        </li>
    
        <li class="chapter active" data-level="24" data-path="supplement.html">
            
                
                    <a href="./supplement.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>24.</b>
                        
                        별책부록
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Introduction</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h1 id="&#xBCC4;&#xCC45;&#xBD80;&#xB85D;">&#xBCC4;&#xCC45;&#xBD80;&#xB85D;</h1>
<p>&#xBD80;&#xB85D;&#xC5D0;&#xC11C;&#xB294; strace &#xBA85;&#xB839;&#xC744; &#xC774;&#xC6A9;&#xD558;&#xC5EC; &#xB2E4;&#xC74C; &#xC0AC;&#xD56D;&#xC5D0; &#xB300;&#xD574; &#xC2E4;&#xC81C; &#xB0B4;&#xBD80;&#xC801;&#xC73C;&#xB85C; &#xC5B4;&#xB5BB;&#xAC8C; &#xCC98;&#xB9AC;&#xB418;&#xB294;&#xC9C0; &#xC54C;&#xC544;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<ul>
<li><p><a href="#subshell"><strong>Subshell</strong></a></p>
</li>
<li><p><a href="#child_process"><strong>Child Process</strong></a></p>
</li>
<li><p><a href="#background_process"><strong>Background Process</strong></a></p>
</li>
<li><p><a href="#assignment"><strong>&#xBA85;&#xB839;&#xC5D0; &#xC120;&#xD589;&#xD558;&#xB294; &#xB300;&#xC785; &#xC5F0;&#xC0B0;</strong></a></p>
</li>
<li><p><a href="#pipe"><strong>Pipe</strong></a></p>
</li>
<li><p><a href="#bash-sh"><strong><code>bash</code> &#xC640; <code>sh</code> &#xC5D0;&#xC11C;&#xC758; INT signal handler &#xAC00; &#xCC98;&#xB9AC;&#xB418;&#xB294; &#xBC29;&#xC2DD;&#xC758; &#xCC28;&#xC774;&#xC810;</strong></a></p>
</li>
<li><p><a href="#zombie"><strong>Zombie &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; wait &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xC5D0; &#xC758;&#xD574; &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xD14C;&#xC774;&#xBE14;&#xC5D0;&#xC11C; &#xC815;&#xB9AC;&#xB418;&#xB294; &#xACFC;&#xC815;</strong></a></p>
</li>
<li><p><a href="#flock"><strong>File lock</strong></a></p>
</li>
<li><p><a href="#thread"><strong>Thread</strong></a></p>
</li>
</ul>
<h3 id="&#xC8FC;&#xC18C;&#xACF5;&#xAC04;&#xC758;-&#xBD84;&#xB9AC;">&#xC8FC;&#xC18C;&#xACF5;&#xAC04;&#xC758; &#xBD84;&#xB9AC;</h3>
<p>&#xD504;&#xB85C;&#xADF8;&#xB7A8; &#xC0AC;&#xC6A9; &#xB3C4;&#xC911;&#xC5D0; &#xC624;&#xB958;&#xB85C; &#xC8FD;&#xB294; &#xACBD;&#xC6B0;&#xB97C; &#xACBD;&#xD5D8;&#xD574; &#xBCF4;&#xC168;&#xC744; &#xAC81;&#xB2C8;&#xB2E4;. &#xBCF4;&#xD1B5; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC774; &#xC2E4;&#xD589;&#xB418;&#xBA74; &#xC5EC;&#xB7EC; &#xAC1C;&#xC758; &#xC2A4;&#xB808;&#xB4DC;&#xB97C; &#xC0DD;&#xC131;&#xD574;&#xC11C;
&#xC0AC;&#xC6A9;&#xD558;&#xBBC0;&#xB85C; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC774; &#xC8FD;&#xB294;&#xB2E4;&#xB294; &#xAC83;&#xC740; &#xC5B4;&#xB290; &#xD55C; &#xC2A4;&#xB808;&#xB4DC;&#xC758; &#xC624;&#xB958;&#xB85C; &#xC778;&#xD574; &#xC8FC;&#xC18C; &#xACF5;&#xAC04;&#xC744; &#xACF5;&#xC720;&#xD558;&#xACE0; &#xC788;&#xB294; &#xB098;&#xBA38;&#xC9C0; &#xC2A4;&#xB808;&#xB4DC;&#xB4E4;&#xC774; &#xBAA8;&#xB450; &#xD568;&#xAED8; &#xC885;&#xB8CC;&#xB41C;&#xB2E4;&#xB294; &#xB73B;&#xC785;&#xB2C8;&#xB2E4;.
&#xD558;&#xC9C0;&#xB9CC; &#xD504;&#xB85C;&#xADF8;&#xB7A8; A &#xAC00; &#xC8FD;&#xB294; &#xB2E4;&#xACE0; &#xD574;&#xC11C; &#xB2E4;&#xB978; &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xC544;&#xC774;&#xB514;&#xB97C; &#xAC00;&#xC9C0;&#xACE0; &#xC2E4;&#xD589; &#xC911;&#xC778; &#xD504;&#xB85C;&#xADF8;&#xB7A8; B &#xAC00; &#xD568;&#xAED8; &#xC8FD;&#xC9C0;&#xB294; &#xC54A;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774;&#xC640; &#xAC19;&#xC774; &#xD504;&#xB85C;&#xADF8;&#xB7A8; A &#xC758; &#xC624;&#xB958;&#xC5D0; &#xB300;&#xD574; &#xD504;&#xB85C;&#xADF8;&#xB7A8; B &#xAC00; &#xC548;&#xC804;&#xD560; &#xC218; &#xC788;&#xB294; &#xC774;&#xC720;&#xB294; &#xC8FC;&#xC18C; &#xACF5;&#xAC04;&#xC774; &#xC11C;&#xB85C; &#xBD84;&#xB9AC;&#xB418;&#xC5B4; &#xC788;&#xAE30; &#xB54C;&#xBB38;&#xC785;&#xB2C8;&#xB2E4;.</p>
<p>&#xC774;&#xC640; &#xAC19;&#xC740; &#xC774;&#xC720;&#xB85C; &#xD574;&#xC11C; OS &#xC5D0;&#xC11C;&#xB3C4; &#xC2DC;&#xC2A4;&#xD15C;&#xC758; &#xC8FC;&#xC18C; &#xACF5;&#xAC04;&#xC744; &#xBD84;&#xB9AC;&#xD574; &#xC0AC;&#xC6A9;&#xD558;&#xB294;&#xB370; &#xADF8;&#xAC83;&#xC774; &#xCEE4;&#xB110; &#xBAA8;&#xB4DC;&#xC640; &#xC720;&#xC800; &#xBAA8;&#xB4DC;&#xC785;&#xB2C8;&#xB2E4;.
&#xC774;&#xC640; &#xAC19;&#xC740; &#xAE30;&#xB2A5;&#xC740; CPU &#xB0B4;&#xC5D0;&#xC11C; &#xD558;&#xB4DC;&#xC6E8;&#xC5B4;&#xC801;&#xC73C;&#xB85C; &#xAD6C;&#xD604;&#xC774; &#xB418;&#xC5B4;&#xC788;&#xB294;&#xB370; &#xAC01; &#xBAA8;&#xB4DC;&#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xD560; &#xC218; &#xC788;&#xB294; &#xBA54;&#xBAA8;&#xB9AC; &#xC8FC;&#xC18C; &#xACF5;&#xAC04;,
i/o port &#xADF8;&#xB9AC;&#xACE0; &#xC2E4;&#xD589;&#xD560; &#xC218; &#xC788;&#xB294; cpu instructions &#xC774; &#xB2E4;&#xB985;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB7EC;&#xBBC0;&#xB85C; &#xCEE4;&#xB110; &#xC790;&#xCCB4;&#xC5D0;&#xC11C; &#xBB38;&#xC81C;&#xAC00; &#xBC1C;&#xC0DD;&#xD558;&#xC9C0; &#xC54A;&#xB294; &#xC774;&#xC0C1; &#xC720;&#xC800; &#xBAA8;&#xB4DC;&#xC5D0;&#xC11C; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xC0AC;&#xC6A9;&#xC790; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC758;
&#xC624;&#xB958;&#xB85C; &#xC778;&#xD574; &#xC2DC;&#xC2A4;&#xD15C; &#xC804;&#xCCB4;&#xAC00; &#xC8FD;&#xB294; &#xACBD;&#xC6B0;&#xAC00; &#xBC1C;&#xC0DD;&#xD558;&#xC9C0; &#xC54A;&#xB294; &#xAC83;&#xC785;&#xB2C8;&#xB2E4;.</p>
<h3 id="system-call">System call</h3>
<p>&#xCEE4;&#xB110; &#xBAA8;&#xB4DC;&#xC5D0;&#xC11C; &#xC2E4;&#xD589;&#xB418;&#xB294; OS &#xB294; &#xC2DC;&#xC2A4;&#xD15C;&#xC758; root &#xACC4;&#xC815;&#xACFC; &#xAC19;&#xC544;&#xC11C; &#xC2DC;&#xC2A4;&#xD15C; &#xB0B4;&#xC758; &#xBAA8;&#xB4E0; &#xC790;&#xC6D0;&#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xB294;&#xB370; &#xC81C;&#xD55C;&#xC774; &#xC5C6;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xBA54;&#xBAA8;&#xB9AC;&#xC640; &#xB514;&#xBC14;&#xC774;&#xC2A4; &#xAC19;&#xC740; &#xC2DC;&#xC2A4;&#xD15C; &#xB9AC;&#xC18C;&#xC2A4;&#xB97C; &#xAD00;&#xB9AC;&#xD558;&#xACE0; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC0DD;&#xC131;&#xD558;&#xACE0; &#xC2A4;&#xCF00;&#xC904; &#xD558;&#xB294; &#xC77C;&#xB4E4;&#xC740; &#xCEE4;&#xB110; &#xBAA8;&#xB4DC;&#xC5D0;&#xC11C; OS &#xC5D0; &#xC758;&#xD574; &#xC774;&#xB8E8;&#xC5B4;&#xC9D1;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB7FC; &#xC720;&#xC800; &#xBAA8;&#xB4DC;&#xC5D0;&#xC11C; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC774; &#xBA54;&#xBAA8;&#xB9AC;&#xB97C; &#xD560;&#xB2F9;&#xD574; &#xC0AC;&#xC6A9;&#xD558;&#xAC70;&#xB098;
&#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xD504;&#xB9B0;&#xD2B8;&#xD558;&#xAE30; &#xC704;&#xD574; &#xD130;&#xBBF8;&#xB110; &#xB514;&#xBC14;&#xC774;&#xC2A4;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xB824;&#xBA74; &#xC5B4;&#xB5BB;&#xAC8C; &#xD574;&#xC57C; &#xD560;&#xAE4C;&#xC694;?
&#xC0AC;&#xC6A9;&#xC790; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC5D0;&#xC11C;&#xB294; OS &#xAC00; &#xD558;&#xB294; &#xC77C;&#xC744; &#xD560; &#xC218; &#xC5C6;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB7EC;&#xBBC0;&#xB85C; &#xADF8;&#xC640; &#xAC19;&#xC740; &#xC791;&#xC5C5;&#xC740; OS &#xC5D0; &#xC694;&#xCCAD;&#xC744; &#xD574;&#xC11C; &#xC774;&#xB8E8;&#xC5B4;&#xC9C0;&#xAC8C; &#xB418;&#xB294;&#xB370; &#xC774;&#xAC83;&#xC774; system call &#xC774;&#xB77C;&#xB294; &#xC778;&#xD130;&#xD398;&#xC774;&#xC2A4;&#xC785;&#xB2C8;&#xB2E4;.
system call &#xC740; &#xCEE4;&#xB110; &#xB0B4;&#xBD80;&#xC5D0; &#xC815;&#xC758;&#xB418;&#xC5B4;&#xC788;&#xC5B4;&#xC11C; &#xC0AC;&#xC6A9;&#xC790; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC5D0;&#xC11C; &#xD638;&#xCD9C;&#xD560; &#xC218; &#xC788;&#xB294; &#xC77C;&#xC885;&#xC758; &#xD568;&#xC218;&#xB85C; 
system call &#xC774; &#xC774;&#xB8E8;&#xC5B4;&#xC9C0;&#xBA74; &#xBA3C;&#xC800; &#xCEE4;&#xB110; &#xBAA8;&#xB4DC;&#xB85C; &#xC2A4;&#xC704;&#xCE6D;&#xC774; &#xB41C; &#xD6C4; &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB418;&#xACE0; &#xC2E4;&#xD589;&#xC774; &#xC644;&#xB8CC;&#xB418;&#xBA74; &#xB2E4;&#xC2DC; &#xC720;&#xC800; &#xBAA8;&#xB4DC;&#xB85C; &#xBCF5;&#xADC0;&#xD558;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.
&#xC77C;&#xBC18; &#xD568;&#xC218; &#xD638;&#xCD9C;&#xC5D0; &#xBE44;&#xD574; &#xAC70;&#xCE58;&#xB294; &#xB2E8;&#xACC4;&#xAC00; &#xB9CE;&#xC544;&#xC11C; &#xB2E8;&#xC810;&#xC744; &#xADF9;&#xBCF5;&#xD558;&#xAE30; &#xC704;&#xD574;
vsyscall, vDSO (virtual dynamic shared object), vvar &#xAC19;&#xC740; &#xBC29;&#xBC95;&#xB4E4;&#xC774; &#xC0AC;&#xC6A9;&#xB418;&#xACE0; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<blockquote>
<p>ldd &#xBA85;&#xB839;&#xC744; &#xC0AC;&#xC6A9;&#xD588;&#xC744; &#xB54C; &#xBAA9;&#xB85D;&#xC758; &#xC81C;&#xC77C;&#xC704;&#xC5D0; &#xB098;&#xC624;&#xB294; &#xAC83;&#xC774; vDSO &#xC785;&#xB2C8;&#xB2E4;.<br>$ cat /proc/$PID/maps &#xC744; &#xD1B5;&#xD574;&#xC11C;&#xB3C4; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</blockquote>
<p>&#xC774;&#xC678;&#xC5D0;&#xB3C4; system call &#xC778;&#xD130;&#xD398;&#xC774;&#xC2A4;&#xB97C; &#xC774;&#xC6A9;&#xD558;&#xAC8C; &#xB418;&#xBA74; &#xC560;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xD504;&#xB85C;&#xADF8;&#xB798;&#xBA38;&#xAC00; &#xD558;&#xB4DC;&#xC6E8;&#xC5B4;&#xC640;
&#xAD00;&#xB828;&#xB41C; &#xC800; &#xC218;&#xC900;&#xC758; &#xD504;&#xB85C;&#xADF8;&#xB798;&#xBC0D;&#xC744; &#xC9C1;&#xC811; &#xD560; &#xD544;&#xC694;&#xAC00; &#xC5C6;&#xB294; &#xC7A5;&#xC810;&#xB3C4; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p><img src="images/sys_call.png" alt=""></p>
<p>System call &#xC744; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC774; 5 &#xAC1C;&#xC758; &#xCE74;&#xD14C;&#xACE0;&#xB9AC;&#xB85C; &#xBD84;&#xB958;&#xD574; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<table>
<tr valign="top"><td>

<b>1. Process Control</b>
<ul>
<li>load</li>
<li>execute</li>
<li>end, abort</li>
<li>create process</li>
<li>terminate process</li>
<li>get/set process attributes</li>
<li>wait for time, wait event, signal event</li>
<li>allocate, free memory</li>
</ul>

</td><td>

<b>2. File management</b>
<ul>
<li>create file, delete file</li>
<li>open, close</li>
<li>read, write, reposition</li>
<li>get/set file attributes</li>
</ul>

</td></tr>

<tr valign="top"><td>

<b>3. Device Management</b>
<ul>
<li>request device, release device</li>
<li>read, write, reposition</li>
<li>get/set device attributes</li>
<li>logically attach or detach devices</li>
</ul>

</td><td>

<b>4. Information Maintenance</b>
<ul>
<li>get/set time or date</li>
<li>get/set system data</li>
<li>get/set process, file, or device attributes</li>
</ul>

</td></tr>

<tr><td colspan="2">

<b>5. Communication</b>
<ul>
<li>create, delete communication connection</li>
<li>send, receive messages</li>
<li>transfer status information</li>
<li>attach or detach remote devices</li>
</ul>

</td></tr>
</table>

<blockquote>
<p>system call &#xD568;&#xC218;&#xB4E4;&#xC758; &#xBAA9;&#xB85D;&#xC740; <code>man syscalls</code> &#xBA85;&#xB839;&#xC73C;&#xB85C; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.<br>system call &#xD568;&#xC218;&#xB294; man &#xD398;&#xC774;&#xC9C0; &#xC139;&#xC158; 2 &#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xBBC0;&#xB85C; <code>man 2 &#xD568;&#xC218;&#xBA85;</code> &#xC73C;&#xB85C; &#xC870;&#xD68C;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.<br>unix &#xCD08;&#xAE30;&#xC5D0;&#xB294; system call &#xD568;&#xC218;&#xAC00; 40 &#xAC1C; &#xC815;&#xB3C4;&#xC600;&#xB294;&#xB370; &#xC9C0;&#xAE08;&#xC740; <a href="https://elixir.bootlin.com/linux/v5.14.7/source/arch/x86/entry/syscalls/syscall_64.tbl" target="_blank">380 &#xAC1C;</a> &#xAC00; &#xB118;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</blockquote>
<p><img src="images/linux_kernel_components.png" alt=""></p>
<h3 id="c-standard-library">C Standard library</h3>
<p>C standard library &#xB294; &#xB0B4;&#xBD80;&#xC801;&#xC73C;&#xB85C; system call &#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xC9C0;&#xB9CC; &#xCD94;&#xAC00;&#xC801;&#xC73C;&#xB85C;
&#xC785;, &#xCD9C;&#xB825; &#xC2DC;&#xC5D0; &#xC911;&#xAC04;&#xC5D0; &#xBC84;&#xD37C;&#xB97C; &#xB450;&#xC5B4;&#xC11C; &#xCD5C;&#xC801;&#xD654;&#xB41C; &#xC131;&#xB2A5;&#xC744; &#xC81C;&#xACF5;&#xD558;&#xAC70;&#xB098;
&#xCD9C;&#xB825;&#xC5D0; &#xD3EC;&#xBA67; &#xAE30;&#xB2A5;&#xC744; &#xC81C;&#xACF5;&#xD558;&#xB294; &#xAC83;&#xACFC; &#xAC19;&#xC740; &#xC720;&#xC6A9;&#xD55C; &#xAE30;&#xB2A5;&#xC744; &#xC81C;&#xACF5;&#xD569;&#xB2C8;&#xB2E4;.
&#xC608;&#xB97C; &#xB4E4;&#xC5B4; fgets, printf, fork &#xAC19;&#xC740; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC; &#xD568;&#xC218;&#xB294; &#xB0B4;&#xBD80;&#xC801;&#xC73C;&#xB85C; read, write, clone 
&#xC2DC;&#xC2A4;&#xD15C;&#xCF5C;&#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xACE0; malloc, calloc, realloc &#xD568;&#xC218;&#xB294; brk &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C;&#xC744; &#xC774;&#xC6A9;&#xD574; heap &#xBA54;&#xBAA8;&#xB9AC;&#xB97C; &#xC870;&#xC808;&#xD569;&#xB2C8;&#xB2E4;.</p>
<p>C standard library &#xB294; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xB4E4;&#xC744; &#xB3D9;&#xC77C;&#xD55C; &#xC774;&#xB984;&#xC73C;&#xB85C; &#xC77C;&#xC885;&#xC758; wrapper &#xD568;&#xC218;&#xB97C; &#xC81C;&#xACF5;&#xD569;&#xB2C8;&#xB2E4;.
&#xC774; wrapper &#xD568;&#xC218;&#xB294; &#xC77C;&#xBC18; &#xD568;&#xC218;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xB294; &#xAC83;&#xACFC; &#xAC19;&#xC774; &#xC190;&#xC27D;&#xAC8C; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xB97C; &#xD638;&#xCD9C;&#xD560; &#xC218; &#xC788;&#xAC8C; &#xD574;&#xC90D;&#xB2C8;&#xB2E4;.
C &#xD504;&#xB85C;&#xADF8;&#xB798;&#xBC0D;&#xC5D0;&#xC11C; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xB294; &#xAC83;&#xC740; &#xBCF4;&#xD1B5; &#xC774; wrapper &#xD568;&#xC218;&#xB97C; &#xB9D0;&#xD569;&#xB2C8;&#xB2E4;.
&#xB9AC;&#xB205;&#xC2A4;&#xC758; futex &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xC758; &#xACBD;&#xC6B0;&#xB294; &#xB530;&#xB85C; wrapper &#xD568;&#xC218;&#xAC00; &#xC5C6;&#xB294;&#xB370; 
( &#xB610;&#xB294; &#xCEE4;&#xB110;&#xC5D0; &#xC0C8;&#xB85C; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xAC00; &#xCD94;&#xAC00;&#xB420; &#xACBD;&#xC6B0; ) 
&#xC774;&#xB54C;&#xB294; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC774; &#xC9C1;&#xC811; syscall &#xD568;&#xC218;&#xB97C; &#xC774;&#xC6A9;&#xD574; &#xD638;&#xCD9C;&#xD569;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-c"><span class="hljs-function"><span class="hljs-keyword">static</span> <span class="hljs-keyword">int</span> <span class="hljs-title">futex</span><span class="hljs-params">(<span class="hljs-keyword">int</span> *uaddr, <span class="hljs-keyword">int</span> futex_op, <span class="hljs-keyword">int</span> val,
      <span class="hljs-keyword">const</span> <span class="hljs-keyword">struct</span> timespec *timeout, <span class="hljs-keyword">int</span> *uaddr2, <span class="hljs-keyword">int</span> val3)</span>
</span>{
    <span class="hljs-keyword">return</span> syscall(SYS_futex, uaddr, futex_op, val, timeout, uaddr, val3);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">io_uring_setup</span><span class="hljs-params">(<span class="hljs-keyword">unsigned</span> entries, <span class="hljs-keyword">struct</span> io_uring_params *p)</span>
</span>{
    <span class="hljs-keyword">return</span> (<span class="hljs-keyword">int</span>) syscall(__NR_io_uring_setup, entries, p);
}
</code></pre>
<blockquote>
<p>C &#xD504;&#xB85C;&#xADF8;&#xB798;&#xBC0D;&#xC744; &#xD560;&#xB54C; &#xC0AC;&#xC6A9;&#xD558;&#xB294; &#xD568;&#xC218;&#xB4E4;&#xC740; &#xBAA8;&#xB450; C standard library &#xC5D0;&#xC11C; &#xC81C;&#xACF5;&#xB418;&#xB294; &#xAC83;&#xC785;&#xB2C8;&#xB2E4;.<br>C standard library &#xD568;&#xC218;&#xB294; man &#xD398;&#xC774;&#xC9C0; &#xC139;&#xC158; 3 &#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xBBC0;&#xB85C; <code>man 3 &#xD568;&#xC218;&#xBA85;</code> &#xC73C;&#xB85C; &#xC870;&#xD68C;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.<br>GNU C library &#xBA54;&#xB274;&#xC5BC;: <a href="https://www.gnu.org/software/libc/manual/html_node/index.html" target="_blank">https://www.gnu.org/software/libc/manual/html_node/index.html</a>  </p>
</blockquote>
<h3 id="strace">Strace</h3>
<p>strace &#xBA85;&#xB839;&#xC740; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; &#xC2E4;&#xD589; &#xC911;&#xC5D0; &#xC0AC;&#xC6A9;&#xD558;&#xB294; system call &#xD568;&#xC218;&#xC640; signal &#xC744; trace &#xD560; &#xC218; &#xC788;&#xB294; &#xBA85;&#xB839;&#xC785;&#xB2C8;&#xB2E4;.
&#xAC00;&#xB839; &#xB450; &#xAC1C;&#xC758; &#xC22B;&#xC790;&#xB97C; &#xC778;&#xC218;&#xB85C; &#xBC1B;&#xC544;&#xC11C; &#xC0B0;&#xC220;&#xC5F0;&#xC0B0;&#xC744; &#xD55C; &#xD6C4;&#xC5D0; &#xACB0;&#xACFC;&#xB97C; &#xB9AC;&#xD134;&#xD558;&#xB294; &#xD568;&#xC218;&#xC77C; &#xACBD;&#xC6B0; &#xD2B9;&#xBCC4;&#xD788; system call &#xC774; &#xD544;&#xC694; &#xC5C6;&#xC2B5;&#xB2C8;&#xB2E4;. 
&#xD558;&#xC9C0;&#xB9CC; &#xD30C;&#xC77C;&#xC744; open &#xD558;&#xACE0;, &#xBA54;&#xBAA8;&#xB9AC;&#xB97C; &#xD560;&#xB2F9;&#xD558;&#xACE0;, &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC0DD;&#xC131;&#xD558;&#xB294; &#xAC83;&#xACFC; &#xAC19;&#xC774;
&#xCEE4;&#xB110;&#xC774; &#xD558;&#xB294; &#xC77C;&#xC740; system call &#xC744; &#xC774;&#xC6A9;&#xD558;&#xBBC0;&#xB85C; strace &#xBA85;&#xB839;&#xC744; &#xC774;&#xC6A9;&#xD558;&#xBA74; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC758; &#xC18C;&#xC2A4; &#xCF54;&#xB4DC;&#xAC00; &#xC5C6;&#xB354;&#xB77C;&#xB3C4; 
&#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC758; &#xC804;&#xBC18;&#xC801;&#xC778; &#xC9C4;&#xD589;&#xACFC;&#xC815;&#xC744; &#xD30C;&#xC545;&#xD574;&#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p>strace &#xB97C; &#xC774;&#xC6A9;&#xD574; &#xC2E4;&#xC81C; trace &#xB97C; &#xC9C4;&#xD589;&#xD558;&#xAE30; &#xC804;&#xC5D0; &#xCD9C;&#xB825;&#xB418;&#xB294; &#xBA54;&#xC2DC;&#xC9C0;&#xC5D0; &#xB300;&#xD574; &#xC54C;&#xC544;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p>&#xB2E4;&#xC74C;&#xC740; &#xAE30;&#xBCF8;&#xC801;&#xC778; &#xCD9C;&#xB825; &#xD615;&#xC2DD;&#xC778;&#xB370; &#xCC98;&#xC74C;&#xC5D0; system call &#xD568;&#xC218;&#xBA85;&#xC774; &#xB098;&#xC624;&#xACE0; <code>( )</code> &#xC548;&#xC5D0; &#xC778;&#xC218;&#xB4E4;&#xC774; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.
&#xB9C8;&#xC9C0;&#xB9C9;&#xC73C;&#xB85C; <code>=</code> &#xC5D0;&#xC11C; &#xD568;&#xC218;&#xC758; &#xB9AC;&#xD134; &#xAC12;&#xC774; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#xD568;&#xC218;&#xBA85;( &#xC778;&#xC218;&#xB4E4; ... ) = &#xB9AC;&#xD134;&#xAC12;</span>
open(<span class="hljs-string">&quot;/dev/null&quot;</span>, O_RDONLY) = <span class="hljs-number">3</span>

<span class="hljs-comment"># &#xC778;&#xC218;&#xB4E4;&#xC740; &#xBCF4;&#xAE30; &#xC88B;&#xAC8C; &#xD574;&#xC11D;&#xB418;&#xC5B4; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.</span>
open(<span class="hljs-string">&quot;xyzzy&quot;</span>, O_WRONLY|O_APPEND|O_CREAT, <span class="hljs-number">0666</span>) = <span class="hljs-number">3</span>
</code></pre>
<p>C &#xD568;&#xC218;&#xC5D0;&#xC11C;&#xB294; &#xAD6C;&#xC870;&#xCCB4;&#xB97C; &#xC778;&#xC218;&#xB85C; &#xC804;&#xB2EC;&#xD560; &#xB54C; passing by value &#xB97C; &#xD560; &#xC218; &#xC788;&#xC9C0;&#xB9CC;
system call &#xC5D0;&#xC11C;&#xB294; &#xD3EC;&#xC778;&#xD130;&#xB9CC; &#xC0AC;&#xC6A9;&#xD569;&#xB2C8;&#xB2E4;.
strace &#xC5D0;&#xC11C; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xD3EC;&#xC778;&#xD130; &#xC778;&#xC218; &#xAC12;&#xB4E4;&#xC740; &#xD568;&#xC218;&#xC758; &#xC2E4;&#xD589; &#xACB0;&#xACFC;&#xB85C; &#xC124;&#xC815;&#xB41C; ouput &#xAC12;&#xC774; &#xD45C;&#xC2DC;&#xB418;&#xAC70;&#xB098;
&#xB610;&#xB294; &#xD568;&#xC218;&#xC5D0; &#xC804;&#xB2EC;&#xB418;&#xB294; input &#xAC12;&#xC774; &#xADF8;&#xB300;&#xB85C; &#xD45C;&#xC2DC;&#xB420; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#xCCAB; &#xBC88;&#xC9F8; &#xC778;&#xC218;&#xB294; input &#xAC12;&#xC774; &#xB418;&#xACE0;, &#xB450; &#xBC88;&#xC9F8; &#xC778;&#xC218;&#xB294; &#xD568;&#xC218; &#xC2E4;&#xD589; &#xACB0;&#xACFC;&#xC778; output &#xAC12;&#xC774; &#xB429;&#xB2C8;&#xB2E4;.</span>
lstat(<span class="hljs-string">&quot;/dev/null&quot;</span>, {st_mode=S_IFCHR|<span class="hljs-number">0666</span>, st_rdev=makedev(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>), ...}) = <span class="hljs-number">0</span>

<span class="hljs-comment"># &#xC774;&#xBC88; &#xACBD;&#xC6B0;&#xB294; &#xD568;&#xC218; &#xC2E4;&#xD589;&#xC774; &#xC2E4;&#xD328;&#xD558;&#xC5EC; &#xB450; &#xBC88;&#xC9F8; &#xC778;&#xC218; &#xAC12;&#xC774; &#xADF8;&#xB300;&#xB85C; input &#xAC12;&#xC774; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &#xB9CC;&#xC57D;&#xC5D0; &#xC131;&#xACF5;&#xD558;&#xC600;&#xB2E4;&#xBA74; 0xb004 &#xAC12;&#xC774; dereferenced &#xB418;&#xC5B4;&#xC11C; &#xC704;&#xC640; &#xAC19;&#xC774; &#xAD6C;&#xC870;&#xCCB4; &#xAC12;&#xC774; &#xD45C;&#xC2DC;&#xB418;&#xACA0;&#xC8E0;.</span>
lstat(<span class="hljs-string">&quot;/foo/bar&quot;</span>, <span class="hljs-number">0</span>xb004) = -<span class="hljs-number">1</span> ENOENT (No such file or directory)

<span class="hljs-comment"># &#xB450; &#xBC88;&#xC9F8; &#xC778;&#xC218; &#xAC12;&#xC740; &#xD568;&#xC218; &#xC2E4;&#xD589; &#xACB0;&#xACFC;&#xC778; output &#xAC12;&#xC785;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-built_in">wait</span>4(-<span class="hljs-number">1</span>, [{WIFSIGNALED(s) &amp;&amp; WTERMSIG(s) == SIGINT}], <span class="hljs-number">0</span>, NULL) = <span class="hljs-number">14921</span>
</code></pre>
<p>&#xD568;&#xC218;&#xC758; &#xB9AC;&#xD134; &#xAC12;&#xC740; &#xC815;&#xC218;&#xB098; &#xC8FC;&#xC18C;&#xAC12;&#xC774; &#xD45C;&#xC2DC;&#xB418;&#xB294;&#xB370; &#xBCF4;&#xD1B5; 0 &#xC740; &#xC131;&#xACF5;&#xC744; -1 &#xC740; &#xC624;&#xB958;&#xB97C; &#xB098;&#xD0C0;&#xB0C5;&#xB2C8;&#xB2E4;.
&#xC774;&#xAC83;&#xC740; &#xC808;&#xB300;&#xC801;&#xC778; &#xAC83;&#xC740; &#xC544;&#xB2C8;&#xACE0; getpriority &#xAC19;&#xC740; &#xD568;&#xC218;&#xC77C; &#xACBD;&#xC6B0;&#xC5D0;&#xB294; -1 &#xC774; &#xC815;&#xC0C1;&#xC801;&#xC778; &#xB9AC;&#xD134; &#xAC12;&#xC774; &#xB420; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC624;&#xB958;&#xC77C; &#xACBD;&#xC6B0; &#xD568;&#xC218;&#xB294; thread local &#xBCC0;&#xC218;&#xC778; errno &#xC5D0; non-zero &#xAC12;&#xC744; &#xC124;&#xC815;&#xD558;&#xB294;&#xB370; &#xC774; &#xAC12;&#xC73C;&#xB85C; &#xC5B4;&#xB5A4; &#xC624;&#xB958;&#xAC00; &#xBC1C;&#xC0DD;&#xD588;&#xB294;&#xC9C0; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
( getpriority &#xD568;&#xC218;&#xC758; &#xACBD;&#xC6B0; &#xD638;&#xCD9C;&#xC804;&#xC5D0; &#xBA3C;&#xC800; errno &#xBCC0;&#xC218;&#xB97C; 0 &#xC73C;&#xB85C; &#xC124;&#xC815;&#xD55C; &#xD6C4; &#xD568;&#xC218; &#xB9AC;&#xD134;&#xC2DC; errno &#xAC12;&#xC744; &#xCCB4;&#xD06C;&#xD558;&#xC5EC;
&#xC624;&#xB958; &#xC5EC;&#xBD80;&#xB97C; &#xD310;&#xB2E8;&#xD569;&#xB2C8;&#xB2E4;. )</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#xC5EC;&#xAE30;&#xC11C; &#xB9AC;&#xD134;&#xAC12; -1 &#xC740; &#xC624;&#xB958;&#xB97C; &#xB098;&#xD0C0;&#xB0B4;&#xACE0; &#xC774;&#xC5B4;&#xC9C0;&#xB294; ENOENT &#xC2EC;&#xBCFC;&#xC740; errno &#xBCC0;&#xC218;&#xC5D0; &#xC124;&#xC815;&#xB41C; &#xAC12;&#xC744; &#xB098;&#xD0C0;&#xB0C5;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &#xC774;&#xC5B4;&#xC11C; ENOENT &#xC5D0; &#xB300;&#xD55C; &#xC124;&#xBA85;&#xC774; ( ) &#xC5D0; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;..</span>
lstat(<span class="hljs-string">&quot;/foo/bar&quot;</span>, <span class="hljs-number">0</span>xb004) = -<span class="hljs-number">1</span> ENOENT (No such file or directory)
</code></pre>
<blockquote>
<p>system call &#xC774;&#xB098; C standard library &#xD568;&#xC218;&#xC5D0;&#xC11C; &#xC124;&#xC815;&#xD558;&#xB294; errno &#xAC12;&#xB4E4;&#xC5D0; &#xB300;&#xD55C; &#xC2EC;&#xBCFC;&#xACFC; &#xC124;&#xBA85;&#xC740; <code>man errno</code> &#xB85C; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</blockquote>
<p>&#xC778;&#xC218;&#xB4E4;&#xC758; &#xAC12;&#xC744; &#xD45C;&#xC2DC;&#xD560; &#xB54C; &#xAD6C;&#xC870;&#xCCB4;&#xC77C; &#xACBD;&#xC6B0;&#xB294; <code>{ }</code> &#xB85C; &#xD45C;&#xC2DC;&#xD558;&#xACE0; &#xB2E8;&#xC21C; &#xD3EC;&#xC778;&#xD130;&#xB098; array &#xC77C; &#xACBD;&#xC6B0;&#xB294; <code>[ ]</code> &#xB85C; &#xD45C;&#xC2DC;&#xD569;&#xB2C8;&#xB2E4;.
bit-set &#xAC12;&#xB3C4; <code>[ ]</code> &#xB85C; &#xD45C;&#xC2DC;&#xD558;&#xB294;&#xB370; &#xCC28;&#xC774;&#xC810;&#xC740; array &#xC758; &#xACBD;&#xC6B0;&#xB294; &#xC6D0;&#xC18C;&#xB4E4;&#xC744; <code>,</code> &#xB85C; &#xBD84;&#xB9AC;&#xD558;&#xACE0; bit-set &#xAC12;&#xB4E4;&#xC740; &#xACF5;&#xBC31;&#xC73C;&#xB85C; &#xBD84;&#xB9AC;&#xD569;&#xB2C8;&#xB2E4;.
bit-set &#xAC12;&#xC744; &#xD45C;&#xC2DC;&#xD560; &#xB54C; &#xC124;&#xC815;&#xB418;&#xC9C0; &#xC54A;&#xC740; &#xAC12;&#xB4E4;&#xC744; &#xD45C;&#xC2DC;&#xD558;&#xB294; &#xAC83;&#xC774; &#xD6A8;&#xC728;&#xC801;&#xC77C; &#xACBD;&#xC6B0; <code>~[ ]</code> &#xD615;&#xD0DC;&#xB85C; &#xD45C;&#xC2DC;&#xD569;&#xB2C8;&#xB2E4;.
&#xC2A4;&#xD2B8;&#xB9C1;&#xC758; &#xACBD;&#xC6B0;&#xB294; &#xAE30;&#xBCF8;&#xC801;&#xC73C;&#xB85C; 32 &#xC790; &#xAE4C;&#xC9C0;&#xB9CC; &#xD45C;&#xC2DC;&#xD558;&#xB294;&#xB370; &#xADF8; &#xC774;&#xC0C1;&#xC758; &#xAC12;&#xC744; &#xAC00;&#xC9C8; &#xACBD;&#xC6B0; &#xB4A4;&#xC5D0; <code>...</code> &#xB97C; &#xBD99;&#xC785;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># { } &#xB85C; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xB450; &#xBC88;&#xC9F8; &#xC778;&#xC218;&#xB294; &#xAD6C;&#xC870;&#xCCB4; &#xAC12;&#xC744; &#xB098;&#xD0C0;&#xB0C4;</span>
lstat(<span class="hljs-string">&quot;/dev/null&quot;</span>, {st_mode=S_IFCHR|<span class="hljs-number">0666</span>, st_rdev=makedev(<span class="hljs-number">1</span>, <span class="hljs-number">3</span>), ...}) = <span class="hljs-number">0</span>

<span class="hljs-comment"># [ ] &#xB85C; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xC778;&#xC218;&#xB294; array &#xAC12;&#xC73C;&#xB85C; &apos;,&apos; &#xC5D0; &#xC758;&#xD574; &#xBD84;&#xB9AC;</span>
getgroups(<span class="hljs-number">32</span>, [<span class="hljs-number">100</span>, <span class="hljs-number">0</span>]) = <span class="hljs-number">2</span>

<span class="hljs-comment"># [ ] &#xB85C; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xC778;&#xC218;&#xB294; bit-set &#xAC12;&#xC73C;&#xB85C; &#xACF5;&#xBC31;&#xC73C;&#xB85C; &#xBD84;&#xB9AC;</span>
sigprocmask(SIG_BLOCK, [CHLD TTOU], []) = <span class="hljs-number">0</span>

<span class="hljs-comment"># [AAA BBB] &#xB294; AAA BBB &#xAC12;&#xC744; &#xB098;&#xD0C0;&#xB0B4;&#xC9C0;&#xB9CC; ~[AAA BBB] &#xC640; &#xAC19;&#xC774; &#xC55E;&#xC5D0; ~ &#xB97C; &#xBD99;&#xC774;&#xBA74;</span>
<span class="hljs-comment"># bitwise NOT &#xC774;&#xB418;&#xC5B4; AAA BBB &#xB97C; &#xC81C;&#xC678;&#xD558;&#xACE0; &#xBAA8;&#xB450; &#xB2E4; &#xAC00; &#xB429;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &#xB530;&#xB77C;&#xC11C; &#xB2E4;&#xC74C; &#xAC19;&#xC740; &#xACBD;&#xC6B0;&#xB294; &#xC2E0;&#xD638; &#xC804;&#xCCB4; &#xAC12;&#xC744; &#xB098;&#xD0C0;&#xB0B4;&#xB294; &#xAC83;&#xACFC; &#xAC19;&#xC2B5;&#xB2C8;&#xB2E4;.</span>
sigprocmask(SIG_UNBLOCK, ~[], NULL) = <span class="hljs-number">0</span>

<span class="hljs-comment"># &#xC2A4;&#xD2B8;&#xB9C1;&#xC740; &#xAE30;&#xBCF8;&#xC801;&#xC73C;&#xB85C; 32 &#xC790; &#xAE4C;&#xC9C0;&#xB9CC; &#xD45C;&#xC2DC;&#xD558;&#xACE0; ... &#xB97C; &#xBD99;&#xC785;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-built_in">read</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;#!/bin/bash\n\necho \&quot;A.sh.....star&quot;</span>..., <span class="hljs-number">80</span>) = <span class="hljs-number">66</span>
</code></pre>
<p>&#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xC804;&#xB2EC;&#xB418;&#xB294; signal &#xC740; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC740; &#xD615;&#xD0DC;&#xB85C; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># SIGINT &#xC2E0;&#xD638;&#xAC00; &#xC0AC;&#xC6A9;&#xC790;&#xC5D0; &#xC758;&#xD574; &#xC804;&#xB2EC;&#xB418;&#xC5B4; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; killed &#xB418;&#xC5C8;&#xC744; &#xACBD;&#xC6B0; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC774; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.</span>
--- SIGINT {si_signo=SIGINT, si_code=SI_USER, si_pid=<span class="hljs-number">14920</span>, si_uid=<span class="hljs-number">1000</span>} ---
+++ killed by SIGINT +++
</code></pre>
<p><code>-f</code> &#xC635;&#xC158;&#xC744; &#xC774;&#xC6A9;&#xD574; child process &#xAE4C;&#xC9C0; trace &#xD558;&#xB2E4; &#xBCF4;&#xBA74; 
&#xD568;&#xC218; &#xC2E4;&#xD589;&#xC774; &#xB05D;&#xB098;&#xC9C0; &#xC54A;&#xC740; &#xC0C1;&#xD0DC;&#xC5D0;&#xC11C; &#xB2E4;&#xB978; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xC758;&#xD574; &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB420; &#xC218; &#xC788;&#xB294;&#xB370; &#xC774;&#xB7F4; &#xACBD;&#xC6B0; strace &#xB294; &#xC21C;&#xC11C;&#xB97C; &#xC720;&#xC9C0;&#xD558;&#xAE30; &#xC704;&#xD574;
<code>&lt;unfinished ...&gt;</code>, <code>&lt;... &#xD568;&#xC218;&#xBA85; resumed&gt;</code> &#xC744; &#xC774;&#xC6A9;&#xD574; &#xD45C;&#xC2DC;&#xD569;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># pid 28772 &#xC5D0;&#xC11C; select &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589; &#xC911;&#xC5D0; &#xC788;&#xC744; &#xB54C;</span>
<span class="hljs-comment"># pid 28779 &#xC5D0;&#xC11C; clock_gettime &#xD568;&#xC218;&#xAC00; &#xD638;&#xCD9C;&#xB41C; &#xACBD;&#xC6B0;&#xC785;&#xB2C8;&#xB2E4;.</span>
[pid <span class="hljs-number">28772</span>] select(<span class="hljs-number">4</span>, [<span class="hljs-number">3</span>], NULL, NULL, NULL &lt;unfinished ...&gt;
[pid <span class="hljs-number">28779</span>] clock_gettime(CLOCK_REALTIME, {<span class="hljs-number">1130322148</span>, <span class="hljs-number">939977000</span>}) = <span class="hljs-number">0</span>
[pid <span class="hljs-number">28772</span>] &lt;... select resumed&gt; )      = <span class="hljs-number">1</span> (<span class="hljs-keyword">in</span> [<span class="hljs-number">3</span>])
</code></pre>
<p><a name="subshell"></a></p>
<h3 id="subshell">Subshell</h3>
<p>strace &#xB97C; &#xC774;&#xC6A9;&#xD558;&#xC5EC; subshell &#xC774; &#xC2E4;&#xC81C; &#xB0B4;&#xBD80;&#xC801;&#xC73C;&#xB85C; &#xC5B4;&#xB5BB;&#xAC8C; &#xCC98;&#xB9AC;&#xB418;&#xB294;&#xC9C0; &#xC54C;&#xC544;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.
strace &#xB294; &#xC9C1;&#xC811; &#xBA85;&#xB839;&#xC744; &#xC778;&#xC218;&#xB85C; &#xBC1B;&#xC544;&#xC11C; child process &#xB85C; &#xC2E4;&#xD589;&#xD558;&#xC5EC; trace &#xD560; &#xC218;&#xB3C4; &#xC788;&#xACE0;
&#xD604;&#xC7AC; &#xC2E4;&#xD589; &#xC911;&#xC778; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; attach &#xD558;&#xC5EC; &#xC2E4;&#xD589;&#xD560; &#xC218;&#xB3C4; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xD55C;&#xAC00;&#xC9C0; &#xCC38;&#xACE0;&#xD574;&#xC57C; &#xB420; &#xC0AC;&#xD56D;&#xC740; strace &#xB294; &#xAE30;&#xBCF8;&#xC801;&#xC73C;&#xB85C; child process &#xD615;&#xC2DD;&#xC73C;&#xB85C;&#xB9CC; trace &#xAC00; &#xAC00;&#xB2A5;&#xD558;&#xACE0;
pid &#xC5D0; attach &#xD558;&#xC5EC; &#xC2E4;&#xD589;&#xD558;&#xB294; &#xBC29;&#xC2DD;&#xC740; &#xAC19;&#xC740; &#xC0AC;&#xC6A9;&#xC790;&#xC758; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB77C;&#xB3C4; root &#xAD8C;&#xD55C;&#xC774; &#xD544;&#xC694;&#xD558;&#xB2E4;&#xB294; &#xC810;&#xC785;&#xB2C8;&#xB2E4;.
&#xC774;&#xC720;&#xB294; &#xC545;&#xC758;&#xC801;&#xC778; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC5D0; &#xC758;&#xD574; &#xC190;&#xC27D;&#xAC8C; trace &#xB418;&#xB294; &#xAC83;&#xC744; &#xBC29;&#xC9C0;&#xD558;&#xAE30; &#xC704;&#xD574;&#xC11C;&#xC774;&#xBBC0;&#xB85C;
&#xB9CC;&#xC57D;&#xC5D0; attach &#xD560;&#xB54C; &quot;Operation not permitted&quot; &#xBA54;&#xC2DC;&#xC9C0;&#xAC00; &#xB098;&#xD0C0;&#xB09C;&#xB2E4;&#xBA74; &#xBA3C;&#xC800; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC740; &#xC124;&#xC815;&#xC744; &#xD1B5;&#xD574;
root &#xB85C; &#xC2E4;&#xD589;&#xD558;&#xB294; &#xAC83;&#xC744; &#xBC29;&#xC9C0;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">$ sudo sysctl -w kernel.yama.ptrace_scope=<span class="hljs-number">0</span>
<span class="hljs-comment"># &#xB610;&#xB294;</span>
$ sudo sh -c <span class="hljs-string">&apos;echo 0 &gt; /proc/sys/kernel/yama/ptrace_scope&apos;</span>

------------------------------------------------------------
<span class="hljs-comment"># reboot &#xD6C4;&#xC5D0;&#xB3C4; &#xC801;&#xC6A9;&#xB418;&#xAC8C; &#xD558;&#xB824;&#xBA74; /etc/sysctl.conf &#xD30C;&#xC77C;&#xC5D0; &#xB2E4;&#xC74C; &#xB77C;&#xC778;&#xC744; &#xCD94;&#xAC00;&#xD569;&#xB2C8;&#xB2E4;.</span>

kernel.yama.ptrace_scope = <span class="hljs-number">0</span>
</code></pre>
<p>bash &#xC758; &#xACBD;&#xC6B0; system call &#xC774; &#xB9CE;&#xC774; &#xBC1C;&#xC0DD;&#xD574; &#xBCF5;&#xC7A1;&#xD558;&#xBBC0;&#xB85C; sh &#xC744; &#xC774;&#xC6A9;&#xD574; trace &#xD558;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.
strace &#xB294; <code>-e</code> &#xC635;&#xC158;&#xC744; &#xD1B5;&#xD574; &#xD2B9;&#xC815; system call &#xD568;&#xC218;&#xB9CC; &#xC9C0;&#xC815;&#xD560; &#xC218;&#xAC00; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xB610;&#xD55C; <code>%file</code>, <code>%process</code>, <code>%network</code>, <code>%signal</code>, <code>%ipc</code>, <code>%memory</code> &#xAC19;&#xC740; &#xADF8;&#xB8F9;&#xC744; &#xC0AC;&#xC6A9;&#xD560; &#xC218;&#xB3C4; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<blockquote>
<p>&#xD2B9;&#xC815; &#xD568;&#xC218;&#xB97C; &#xC81C;&#xC678;&#xD558;&#xACE0; &#xBAA8;&#xB450;&#xB97C; &#xC120;&#xD0DD;&#xD560; &#xACBD;&#xC6B0;&#xB294; &#xC55E;&#xC5D0; <code>!</code> &#xB97C; &#xBD99;&#xC774;&#xBA74; &#xB429;&#xB2C8;&#xB2E4;. ( <code>-e &apos;!clone,execve&apos;</code> )</p>
</blockquote>
<p>2 &#xAC1C;&#xC758; &#xD130;&#xBBF8;&#xB110;&#xC744; &#xC900;&#xBE44;&#xD55C; &#xD6C4; &#xCCAB; &#xBC88;&#xC9F8; &#xD130;&#xBBF8;&#xB110;&#xC5D0;&#xC11C; /bin/sh &#xBA85;&#xB839;&#xC744; &#xC2E4;&#xD589;&#xD574; sh &#xD504;&#xB86C;&#xD504;&#xD2B8;&#xB85C; &#xB4E4;&#xC5B4;&#xAC11;&#xB2C8;&#xB2E4;.</p>
<p>1 . terminal 1 &#xC5D0;&#xC11C; sh &#xC744; &#xC2E4;&#xD589;&#xD55C; &#xD6C4; pid &#xB97C; &#xD655;&#xC778;&#xD569;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">sh$ <span class="hljs-built_in">echo</span> $$
<span class="hljs-number">1234</span>
</code></pre>
<p>2 . terminal 2 &#xC5D0;&#xC11C; &#xB2E4;&#xC74C; &#xBA85;&#xB839;&#xC744; &#xC2E4;&#xD589;&#xD569;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &apos;-o&apos; &#xC635;&#xC158;&#xC740; &#xCD9C;&#xB825;&#xC774; subshell.strace &#xD30C;&#xC77C;&#xB85C; &#xC800;&#xC7A5;&#xB418;&#xAC8C; &#xD569;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &apos;-e&apos; &#xC635;&#xC158;&#xC740; clone,execve &#xD568;&#xC218;&#xB9CC; trace &#xD569;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &apos;-f&apos; &#xC635;&#xC158;&#xC740; child process &#xB3C4; trace &#xB418;&#xAC8C; &#xD569;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &apos;-p&apos; &#xC635;&#xC158;&#xC740; pid &#xC5D0; attach &#xD569;&#xB2C8;&#xB2E4;.</span>

$ strace -o subshell.strace <span class="hljs-operator">-e</span> <span class="hljs-built_in">clone</span>,execve <span class="hljs-operator">-f</span> -p <span class="hljs-number">1234</span>
</code></pre>
<p>3 . terminal 1 &#xC758; sh &#xD504;&#xB86C;&#xD504;&#xD2B8; &#xC0C1;&#xC5D0;&#xC11C; &#xB2E4;&#xC74C; &#xBA85;&#xB839;&#xC744; &#xCC28;&#xB840;&#xB85C; &#xC785;&#xB825;&#xD569;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">sh$ date; date; date

sh$ ( date; date; date )
</code></pre>
<p>4 . terminal 2 &#xC5D0;&#xC11C; strace &#xBA85;&#xB839;&#xC744; ctrl-c &#xB85C; &#xC885;&#xB8CC;&#xD569;&#xB2C8;&#xB2E4;.</p>
<p>ls &#xD574;&#xBCF4;&#xBA74; &#xB514;&#xB809;&#xD1A0;&#xB9AC;&#xC5D0; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC740; &#xB0B4;&#xC6A9;&#xC758; subshell.strace &#xD30C;&#xC77C;&#xC774; &#xC0DD;&#xC131;&#xB41C; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.<br>vi &#xB85C; &#xC5F4;&#xC5C8;&#xC744;&#xB54C; highlight &#xAC00; &#xB418;&#xC9C0; &#xC54A;&#xC73C;&#xBA74; <code>:set ft=strace</code> &#xBA85;&#xB839;&#xC744; &#xC785;&#xB825;&#xD569;&#xB2C8;&#xB2E4;.</p>
<p><img src="images/strace/strace-subshell.png" alt=""></p>
<p><a href="process_creation.html">Process creation</a> &#xBA54;&#xB274;&#xC5D0;&#xC11C; &#xBA85;&#xB839;&#xC774; &#xC2E4;&#xD589;&#xB420;&#xB54C; fork-exec &#xACFC;&#xC815;&#xC744; &#xAC70;&#xCE5C;&#xB2E4;&#xACE0; &#xC124;&#xBA85;&#xD558;&#xC600;&#xB294;&#xB370;
&#xC2E4;&#xC81C; &#xB9AC;&#xB205;&#xC2A4;&#xC5D0;&#xC11C;&#xB294; fork &#xC774; &#xB0B4;&#xBD80;&#xC801;&#xC73C;&#xB85C; clone &#xC2DC;&#xC2A4;&#xD15C; &#xCF5C;&#xC5D0; &#xC758;&#xD574; &#xCC98;&#xB9AC;&#xAC00; &#xB429;&#xB2C8;&#xB2E4;.
&#xC704;&#xC5D0;&#xC11C;&#xBD80;&#xD130; &#xCC28;&#xB840;&#xB300;&#xB85C; fork, exec &#xACFC;&#xC815;&#xC744; &#xAC70;&#xCE58;&#xBA70; &#xCC98;&#xC74C; &#xC785;&#xB825;&#xD55C; 3 &#xAC1C;&#xC758; date &#xBA85;&#xB839;&#xC774; &#xC2E4;&#xD589;&#xB418;&#xACE0; &#xC885;&#xB8CC;&#xB418;&#xB294;&#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p>&#xB178;&#xB780;&#xC0C9; &#xBC15;&#xC2A4; &#xBD80;&#xBD84;&#xC774; subshell &#xB85C; <code>( date; date; date )</code> &#xBA85;&#xB839;&#xC744; &#xC2E4;&#xD589;&#xD55C; &#xBD80;&#xBD84;&#xC778;&#xB370;
&#xBE68;&#xAC04;&#xC0C9; &#xBC15;&#xC2A4;&#xB85C; &#xD45C;&#xC2DC;&#xB41C; &#xBD80;&#xBD84;&#xC744; &#xBCF4;&#xBA74; clone &#xD568;&#xC218;&#xAC00; &#xC5F0;&#xC774;&#xC5B4; &#xB450; &#xBC88; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC5EC;&#xAE30;&#xC11C; &#xCCAB; &#xBC88;&#xC9F8; clone &#xC774; subshell &#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; &#xBD80;&#xBD84;&#xC785;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB9AC;&#xACE0; &#xB9C8;&#xC9C0;&#xB9C9; &#xBA85;&#xB839;&#xC740; clone &#xC5C6;&#xC774; &#xBC14;&#xB85C; exec &#xD558;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xB294;&#xB370; &#xC774;&#xAC83;&#xC740; subshell optimization &#xC73C;&#xB85C; 
subshell clone &#xC774; &#xB0A8;&#xC544;&#xC788;&#xAE30; &#xB54C;&#xBB38;&#xC785;&#xB2C8;&#xB2E4;.</p>
<p>subshell &#xC740; &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8; &#xB0B4;&#xC5D0;&#xC11C; &#xC790;&#xC8FC; &#xC0AC;&#xC6A9;&#xB418;&#xBBC0;&#xB85C; optimization &#xC774; &#xD544;&#xC694;&#xD558;&#xC9C0;&#xB9CC;
&#xC2A4;&#xD06C;&#xB9BD;&#xD2B8; &#xD30C;&#xC77C; &#xAC19;&#xC740; &#xACBD;&#xC6B0;&#xB294; &#xD2B9;&#xBCC4;&#xD788; &#xD544;&#xC694;&#xAC00; &#xC5C6;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xD558;&#xC9C0;&#xB9CC; exec &#xBA85;&#xB839;&#xC744; &#xC0AC;&#xC6A9;&#xD558;&#xBA74; subshell &#xACFC; &#xAC19;&#xC740; &#xD6A8;&#xACFC;&#xB97C; &#xC5BB;&#xC744; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">$ cat test.sh
<span class="hljs-shebang">#!/bin/sh
</span>
date
date
<span class="hljs-built_in">exec</span> /bin/date     <span class="hljs-comment"># &#xC0C8;&#xB85C; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC0DD;&#xC131;&#xD558;&#xC9C0; &#xC54A;&#xACE0; &#xD604;&#xC7AC; &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC774;&#xC6A9;&#xD574; &#xC2E4;&#xD589;</span>
</code></pre>
<p><img src="images/strace/strace-subshell3.png" alt=""></p>
<p><a name="child_process"></a></p>
<h3 id="child-process">Child Process</h3>
<p>child process &#xAC00; &#xC0DD;&#xC131;&#xB420; &#xB54C; subshell &#xC758; &#xACBD;&#xC6B0;&#xB294; fork &#xACFC;&#xC815;&#xB9CC; &#xAC70;&#xCE58;&#xC9C0;&#xB9CC; &#xBA85;&#xB839; &#xC2E4;&#xD589;&#xC758; &#xACBD;&#xC6B0;&#xB294; fork-exec &#xACFC;&#xC815;&#xC744; &#xAC70;&#xCE69;&#xB2C8;&#xB2E4;.
&#xC774;&#xB54C; parent process &#xB294; wait &#xD568;&#xC218;&#xB97C; &#xC2E4;&#xD589;&#xD558;&#xC5EC; child process &#xAC00; &#xC885;&#xB8CC;&#xB420; &#xB54C;&#xAE4C;&#xC9C0;
&#xAE30;&#xB2E4;&#xB9AC;&#xB294;&#xB370;&#xC694;. &#xC544;&#xB798; &#xADF8;&#xB9BC;&#xC5D0;&#xC11C; &#xB179;&#xC0C9; &#xBC15;&#xC2A4; &#xBD80;&#xBD84;&#xC774; parent process &#xC5D0; &#xD574;&#xB2F9;&#xB429;&#xB2C8;&#xB2E4;.
child process &#xAC00; &#xC2E4;&#xD589;&#xC744; &#xB9C8;&#xCE58;&#xACE0; &#xC885;&#xB8CC;&#xD558;&#xAC8C; &#xB418;&#xBA74; parent &#xC758; wait &#xD568;&#xC218;&#xAC00; resume &#xB418;&#xBA74;&#xC11C;
child process &#xC758; PCB &#xC5D0; &#xC124;&#xC815;&#xB418;&#xC5B4; &#xC788;&#xB294; &#xC885;&#xB8CC; &#xC0C1;&#xD0DC; &#xAC12;&#xC744; &#xAC00;&#xC838;&#xC624;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.
&#xB9CC;&#xC57D;&#xC5D0; &#xC774; &#xACFC;&#xC815;&#xC774; &#xCC98;&#xB9AC;&#xB418;&#xC9C0; &#xC54A;&#xC73C;&#xBA74; child process &#xB294; &#xC880;&#xBE44; &#xC0C1;&#xD0DC;&#xB85C; &#xACC4;&#xC18D; &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xD14C;&#xC774;&#xBE14;&#xC5D0; &#xB0A8;&#xC544;&#xC788;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.</p>
<p>child process &#xC758; &#xC0C1;&#xD0DC;&#xAC00; &#xBCC0;&#xACBD;&#xB418;&#xC5B4; parent process &#xC5D0; SIGCHLD &#xC2E0;&#xD638;&#xAC00; &#xC804;&#xB2EC;&#xB418;&#xB294; &#xAC83;&#xB3C4; &#xBCFC; &#xC218; &#xC788;&#xB294;&#xB370;
parent &#xC5D0;&#xC11C; SIGCHLD trap handler &#xB97C; &#xC124;&#xC815;&#xD558;&#xC600;&#xB2E4;&#xBA74; &#xC2E4;&#xD589;&#xB420; &#xAC83;&#xC785;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># terminal 2</span>
$ strace -o child.strace <span class="hljs-operator">-e</span> %process,write <span class="hljs-operator">-f</span> -p <span class="hljs-number">1234</span>

-----------------------------------------------------

<span class="hljs-comment"># terminal 1</span>
sh$ date; date -@    <span class="hljs-comment"># -@ &#xB294; &#xC624;&#xB958;&#xB97C; &#xC704;&#xD55C; &#xC635;&#xC158;</span>
</code></pre>
<p><img src="images/strace/strace-child-process.png" alt=""></p>
<p><a name="background_process"></a></p>
<h3 id="background-process">Background Process</h3>
<p><code>&amp;</code> &#xBB38;&#xC790;&#xB97C; &#xC774;&#xC6A9;&#xD574; background &#xB85C; child process &#xB97C; &#xC2E4;&#xD589;&#xD558;&#xBA74; parent &#xB294;
child process &#xAC00; &#xC885;&#xB8CC;&#xB420; &#xB54C;&#xAE4C;&#xC9C0; &#xAE30;&#xB2E4;&#xB9AC;&#xC9C0; &#xC54A;&#xACE0; &#xBC14;&#xB85C; &#xB2E4;&#xC74C; &#xC791;&#xC5C5;&#xC744; &#xC9C4;&#xD589;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p>&#xBA3C;&#xC800; wait &#xD568;&#xC218;&#xC5D0; &#xB300;&#xD574; &#xC54C;&#xC544;&#xBCFC; &#xD544;&#xC694;&#xAC00; &#xC788;&#xB294;&#xB370;&#xC694;</p>
<blockquote>
<p>waitpid ( pid, wstatus, options );</p>
</blockquote>
<p>pid &#xB294; &#xAE30;&#xB2E4;&#xB9B4; child pid &#xB97C; &#xB9D0;&#xD558;&#xB294;&#xB370; &#xC774; &#xAC12;&#xC774; <code>-1</code> &#xC774;&#xBA74; any child process &#xAC00; &#xB429;&#xB2C8;&#xB2E4;.
wstatus &#xC5D0;&#xB294; &#xD568;&#xC218; &#xC2E4;&#xD589; &#xACB0;&#xACFC;&#xB85C; child process &#xC758; &#xC885;&#xB8CC; &#xC0C1;&#xD0DC; &#xAC12;&#xC774; &#xC5EC;&#xAE30;&#xC5D0; &#xC800;&#xC7A5;&#xB429;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># terminal 2</span>
$ strace -o background.strace <span class="hljs-operator">-e</span> %process,write <span class="hljs-operator">-f</span> -p <span class="hljs-number">1234</span>

---------------------------------------------------------

<span class="hljs-comment"># terminal 1</span>
sh$ date &amp;
</code></pre>
<p><img src="images/strace/background_process_1.png" alt=""></p>
<p>&#xBA3C;&#xC800; &#xBE44;&#xAD50;&#xB97C; &#xC704;&#xD574;&#xC11C; &#xC55E;&#xC11C; &#xC124;&#xBA85;&#xD588;&#xB358; child process &#xC758; &#xACBD;&#xC6B0;&#xB97C; &#xB2E4;&#xC2DC; &#xC0B4;&#xD3B4;&#xBCF4;&#xBA74;</p>
<ul>
<li>2&#xBC88; &#xB77C;&#xC778;: <code>wait4(-1, &lt;unfinished ...&gt;</code>  &#xC5D0;&#xC11C; parent process &#xAC00; block &#xB410;&#xB2E4;&#xAC00; </li>
<li>child process &#xAC00; &#xC885;&#xB8CC;&#xB41C; &#xD6C4;&#xC5D0;</li>
<li>8&#xBC88; &#xB77C;&#xC778;: <code>&lt;... wait4 resumed&gt;</code> &#xC5D0;&#xC11C; &#xC2E4;&#xD589;&#xC774; &#xC7AC;&#xAC1C;&#xB418;&#xBA74;&#xC11C;</li>
<li>9&#xBC88; &#xB77C;&#xC778;: &#xC5D0;&#xC11C; <code>SIGCHLD</code> &#xC2E0;&#xD638;&#xAC00; &#xC804;&#xB2EC;&#xB418;&#xB294;&#xB370;&#xC694;</li>
</ul>
<p>Background process &#xC758; &#xACBD;&#xC6B0;&#xB97C; &#xBCF4;&#xBA74; </p>
<ul>
<li>2&#xBC88; &#xB77C;&#xC778;: &#xC5D0;&#xC11C; wait &#xD568;&#xC218; &#xC2E4;&#xD589;&#xC774; &#xC644;&#xB8CC;&#xB418;&#xACE0;</li>
<li>3&#xBC88; &#xB77C;&#xC778;: &#xC5D0;&#xC11C; &#xC774;&#xC5B4;&#xC11C; write &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774;&#xAC83;&#xC740; &#xB2E4;&#xC2DC; &#xB9D0;&#xD574;&#xC11C; prarent process &#xAC00; wait &#xD568;&#xC218;&#xC5D0; &#xC758;&#xD574; block &#xB418;&#xC9C0; &#xC54A;&#xB294;&#xB2E4;&#xB294; &#xC758;&#xBBF8;&#xC778;&#xB370;&#xC694;</li>
</ul>
<p>wait &#xD568;&#xC218; &#xC2E4;&#xD589;&#xC2DC; &#xCD94;&#xAC00;&#xB41C; <code>WNOHANG</code> &#xC635;&#xC158;&#xC740; &#xC885;&#xB8CC;&#xB41C; child process &#xAC00; &#xC5C6;&#xC744; &#xACBD;&#xC6B0;
&#xBC14;&#xB85C; return &#xB418;&#xAC8C; &#xD569;&#xB2C8;&#xB2E4;.</p>
<p>&#xC774;&#xD6C4; child process &#xAC00; &#xC885;&#xB8CC;&#xB418;&#xC5B4; <code>SIGCHLD</code> &#xC2E0;&#xD638;&#xAC00; prarent process &#xC5D0; &#xC804;&#xB2EC;&#xB418;&#xACE0;
&#xB9C8;&#xC9C0;&#xB9C9;&#xC73C;&#xB85C; &#xC885;&#xB8CC; &#xC0C1;&#xD0DC; &#xAC12;&#xC744; &#xAC00;&#xC838;&#xC624;&#xAE30; &#xC704;&#xD574; wait &#xD568;&#xC218;&#xAC00; &#xB2E4;&#xC2DC; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<h4 id="background-&#xB85C;-&#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C;-&#xC2E4;&#xD589;&#xD560;-&#xB54C;---&#xC640;---&#xBE44;&#xAD50;">background &#xB85C; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC2E4;&#xD589;&#xD560; &#xB54C; <code>{ }</code> &#xC640; <code>( )</code> &#xBE44;&#xAD50;</h4>
<p>&#xAE30;&#xBCF8;&#xC801;&#xC73C;&#xB85C; <code>&amp;&amp;</code> <code>||</code> <code>|</code> &#xC55E;&#xC5D0;&#xC11C;&#xB294; <code>&amp;</code> &#xC5F0;&#xC0B0;&#xC790;&#xB97C; &#xC774;&#xC6A9;&#xD574; background &#xB85C; &#xC2E4;&#xD589;&#xD560; &#xC218; &#xC5C6;&#xB294;&#xB370;&#xC694;.
&#xD558;&#xC9C0;&#xB9CC; &#xAD04;&#xD638;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xBA74; &#xAC00;&#xB2A5;&#xD569;&#xB2C8;&#xB2E4;.
&#xB2E4;&#xC74C;&#xC740; <code>{ }</code> &#xD0A4;&#xC6CC;&#xB4DC;&#xC640; <code>( )</code> &#xBA54;&#xD0C0; &#xBB38;&#xC790;&#xB97C; &#xBE44;&#xAD50;&#xD574; &#xBCF8; &#xAC83;&#xC778;&#xB370;
<code>{ }</code> &#xD0A4;&#xC6CC;&#xB4DC;&#xC758; &#xACBD;&#xC6B0; &#xAD04;&#xD638; &#xC548;&#xC5D0;&#xC11C; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xBA85;&#xB839;&#xC774; job table &#xC5D0; &#xB4F1;&#xB85D;&#xC774; &#xB418;&#xB294; &#xBC18;&#xBA74;
<code>( )</code> &#xC758; &#xACBD;&#xC6B0;&#xB294; &#xB4F1;&#xB85D;&#xB418;&#xC9C0; &#xC54A;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xB610;&#xD55C; background &#xBA85;&#xB839;&#xC758; &#xC885;&#xB8CC; &#xC0C1;&#xD0DC; &#xAC12;&#xC5D0; &#xC0C1;&#xAD00;&#xC5C6;&#xC774; <code>echo 222</code> &#xBA85;&#xB839;&#xC774; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">$ { <span class="hljs-built_in">echo</span> <span class="hljs-number">111</span> &amp; } &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-number">222</span>       <span class="hljs-comment"># { } &#xD0A4;&#xC6CC;&#xB4DC;</span>
[<span class="hljs-number">1</span>] <span class="hljs-number">3160528</span>
<span class="hljs-number">222</span>
<span class="hljs-number">111</span>
[<span class="hljs-number">1</span>]+  Done                    <span class="hljs-built_in">echo</span> <span class="hljs-number">111</span>
</code></pre>
<p><img src="images/strace/background_process_2.png" alt=""></p>
<pre><code class="lang-bash">$ ( <span class="hljs-built_in">echo</span> <span class="hljs-number">111</span> &amp; ) &amp;&amp; <span class="hljs-built_in">echo</span> <span class="hljs-number">222</span>       <span class="hljs-comment"># ( ) &#xBA54;&#xD0C0;&#xBB38;&#xC790;</span>
<span class="hljs-number">111</span>                                <span class="hljs-comment"># subshell &#xC774; &#xD558;&#xB098; &#xB354; &#xC0DD;&#xC131;&#xB41C;&#xB2E4;.</span>
<span class="hljs-number">222</span>
</code></pre>
<p><img src="images/strace/background_process_3.png" alt=""></p>
<p><a name="assignment"></a></p>
<h3 id="&#xBA85;&#xB839;&#xC5D0;-&#xC120;&#xD589;&#xD558;&#xB294;-&#xB300;&#xC785;-&#xC5F0;&#xC0B0;">&#xBA85;&#xB839;&#xC5D0; &#xC120;&#xD589;&#xD558;&#xB294; &#xB300;&#xC785; &#xC5F0;&#xC0B0;</h3>
<blockquote>
<p>$ AAA=100 BBB=200 CCC=300 date</p>
</blockquote>
<p>&#xBA85;&#xB839;&#xC5D0; &#xC120;&#xD589;&#xD558;&#xB294; &#xB300;&#xC785;&#xC5F0;&#xC0B0; &#xBCC0;&#xC218;&#xAC12;&#xC774; &#xC2E4;&#xC81C; &#xC5B4;&#xB5BB;&#xAC8C; &#xC804;&#xB2EC;&#xB418;&#xB294;&#xC9C0; &#xC0B4;&#xD3B4;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.<br>strace &#xC5D0;&#xC11C; &#xCD9C;&#xB825;&#xB418;&#xB294; &#xC778;&#xC218; &#xAC12;&#xC740; &#xC2A4;&#xD2B8;&#xB9C1;&#xC758; &#xACBD;&#xC6B0; 32 &#xC790;&#xAC00; &#xB118;&#xC5B4;&#xAC00;&#xBA74; <code>...</code> &#xB85C; &#xD45C;&#xC2DC;&#xB418;&#xACE0;
exec &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB420;&#xB54C; &#xC804;&#xB2EC;&#xB418;&#xB294; &#xD658;&#xACBD; &#xBCC0;&#xC218;&#xAC12;&#xB4E4;&#xC740; <code>/* 95 vars */</code> &#xD615;&#xD0DC;&#xB85C; &#xD45C;&#xC2DC;&#xAC00; &#xB429;&#xB2C8;&#xB2E4;.
&#xC2A4;&#xD2B8;&#xB9C1;&#xC758; &#xACBD;&#xC6B0; <code>-s</code> &#xC635;&#xC158;&#xC73C;&#xB85C; &#xD06C;&#xAE30;&#xB97C; &#xC870;&#xC808;&#xD560;&#xC218; &#xC788;&#xACE0; &#xD658;&#xACBD; &#xBCC0;&#xC218;&#xAC12;&#xC740; <code>-v</code> &#xC635;&#xC158;&#xC744; &#xD1B5;&#xD574; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># terminal 2</span>
$ strace -o assign.strace <span class="hljs-operator">-e</span> %process -v <span class="hljs-operator">-f</span> -p <span class="hljs-number">1234</span> 

----------------------------------------------------------

<span class="hljs-comment"># terminal 1</span>
sh$ AAA=<span class="hljs-number">100</span> BBB=<span class="hljs-number">200</span> CCC=<span class="hljs-number">300</span> date
</code></pre>
<p>&#xC0DD;&#xC131;&#xB41C; assign.strace &#xD30C;&#xC77C;&#xC744; &#xC5F4;&#xC5B4; &#xBCF4;&#xBA74; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC774; exec &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB420;&#xB54C;
export &#xD55C; &#xBCC0;&#xC218;&#xB4E4;&#xACFC; &#xD568;&#xAED8; AAA=100, BBB=2000, CCC=3000 &#xC774; &#xC804;&#xB2EC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218;&#xAC00; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p><img src="images/strace/strace-assignment.png" alt=""></p>
<p><a name="pipe"></a></p>
<h3 id="pipe">Pipe</h3>
<p>&#xBAA8;&#xB4C8;&#xD654;&#xB77C;&#xB294; &#xC720;&#xB2C9;&#xC2A4; &#xCCA0;&#xD559;&#xC744; &#xAC00;&#xB2A5;&#xD558;&#xAC8C; &#xD55C; &#xD30C;&#xC774;&#xD504; &#xAE30;&#xB2A5;&#xC740; 
&#xC6D0;&#xB798; Unix OS &#xB97C; &#xB9CC;&#xB4E4; &#xB2F9;&#xC2DC;&#xC5D0;&#xB294; &#xB123;&#xC744; &#xC0DD;&#xAC01;&#xC774; &#xC5C6;&#xC5C8;&#xB2E4;&#xACE0; &#xD569;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB7F0;&#xB370; &#xB2F9;&#xC2DC; Bell Labs &#xC5F0;&#xAD6C;&#xC18C; &#xB9AC;&#xB354;&#xC600;&#xB358; Doug McIlroy &#xAC00; &#xC774; &#xAE30;&#xB2A5;&#xC740; &#xAF2D; &#xB123;&#xC5B4;&#xC57C; &#xB41C;&#xB2E4;&#xACE0;
&#xC790;&#xAFB8; &#xC8FC;&#xC7A5;&#xD574;&#xC11C; &#xB123;&#xAC8C; &#xB418;&#xC5C8;&#xB2E4;&#xACE0; &#xD569;&#xB2C8;&#xB2E4;.
Ken Thompson &#xC774; pipe &#xC2DC;&#xC2A4;&#xD15C; &#xCF5C; &#xD568;&#xC218;&#xB97C; &#xB9CC;&#xB4E4;&#xACE0; &#xD30C;&#xC774;&#xD504;&#xB97C; &#xC774;&#xC6A9;&#xD560; &#xC218; &#xC788;&#xAC8C; 
&#xBAA8;&#xB4E0; &#xBA85;&#xB839;&#xB4E4;&#xC744; &#xC218;&#xC815;&#xD588;&#xB2E4;&#xACE0; &#xD569;&#xB2C8;&#xB2E4;.
&#xD30C;&#xC774;&#xD504;&#xAC00; &#xB3D9;&#xC791;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCF8; &#xD6C4;&#xC5D0;&#xB294; &#xC774;&#xC804;&#xC73C;&#xB85C; &#xB3CC;&#xC544;&#xAC00;&#xACA0;&#xB2E4;&#xB294; &#xC0AC;&#xB78C;&#xC774; &#xC5C6;&#xC5C8;&#xB2E4;&#xACE0; &#xD569;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#xCD5C;&#xADFC; &#xB9AC;&#xB205;&#xC2A4;&#xC5D0;&#xC11C; pipe --&gt; pipe2 &#xB85C; &#xBCC0;&#xACBD;&#xB418;&#xC5C8;&#xC74C;.</span>
$ strace -qf <span class="hljs-operator">-e</span> execve,pipe,dup2,<span class="hljs-built_in">read</span>,write \
    sh -c <span class="hljs-string">&apos;echo hello | wc -c&apos;</span>
</code></pre>
<p><img src="images/strace/strace-pipe.png" alt=""></p>
<ol>
<li><p>2&#xBC88; &#xB77C;&#xC778;: parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; <code>sh -c</code> &#xC5D0;&#xC11C; pipe &#xC2DC;&#xC2A4;&#xD15C; &#xCF5C;&#xC744; &#xC774;&#xC6A9;&#xD574; &#xD30C;&#xC774;&#xD504;&#xB97C; &#xC0DD;&#xC131;&#xD569;&#xB2C8;&#xB2E4;.
array &#xAC12; &#xC911;&#xC5D0; &#xCCAB; &#xBC88;&#xC9F8; 3 &#xBC88;&#xC774; read &#xC5D0; &#xC0AC;&#xC6A9;&#xB418;&#xB294; FD &#xAC00; &#xB418;&#xACE0; &#xB450; &#xBC88;&#xC9F8; 4 &#xBC88;&#xC774; write &#xC5D0; &#xC0AC;&#xC6A9;&#xB418;&#xB294; FD &#xAC00; &#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>3&#xBC88;: pid 282367 &#xC740; <code>echo hello</code> &#xBA85;&#xB839;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC778;&#xB370; dup2 &#xC2DC;&#xC2A4;&#xD15C; &#xCF5C;&#xC744; &#xC774;&#xC6A9;&#xD574;
FD 4 &#xBC88;&#xC744; FD 1 &#xBC88;&#xC73C;&#xB85C; copy &#xD569;&#xB2C8;&#xB2E4;. &#xC774;&#xB54C; &#xAE30;&#xC874;&#xC5D0; open &#xB418;&#xC5C8;&#xB358; FD 1 &#xBC88;&#xC740; 
&#xC790;&#xB3D9;&#xC73C;&#xB85C; close &#xB418;&#xACE0; &#xB300;&#xC2E0;&#xC5D0; FD 4 &#xBC88;&#xC774; FD 1 &#xBC88;&#xC73C;&#xB85C; &#xC0AC;&#xC6A9;&#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>4&#xBC88;: &#xC774;&#xB54C;&#xBD80;&#xD130;&#xB294; FD 1 &#xBC88; STDOUT &#xC73C;&#xB85C; &#xCD9C;&#xB825;&#xD558;&#xBA74; &#xD30C;&#xC774;&#xD504;&#xB85C; write &#xC774; &#xB418;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>7&#xBC88;: pid 282368 &#xC740; <code>wc -c</code> &#xBA85;&#xB839;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC778;&#xB370; dup2 &#xC2DC;&#xC2A4;&#xD15C; &#xCF5C;&#xC744; &#xC774;&#xC6A9;&#xD574;
FD 3 &#xBC88;&#xC744; FD 0 &#xBC88;&#xC73C;&#xB85C; copy &#xD569;&#xB2C8;&#xB2E4;. &#xC774;&#xB54C; &#xAE30;&#xC874;&#xC5D0; open &#xB418;&#xC5C8;&#xB358; FD 0 &#xBC88;&#xC740; 
&#xC790;&#xB3D9;&#xC73C;&#xB85C; close &#xB418;&#xACE0; &#xB300;&#xC2E0;&#xC5D0; FD 3 &#xBC88;&#xC774; FD 0 &#xBC88;&#xC73C;&#xB85C; &#xC0AC;&#xC6A9;&#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>9&#xBC88;: &#xC774;&#xB54C;&#xBD80;&#xD130;&#xB294; FD 0 &#xBC88; STDIN &#xC744; read &#xD558;&#xBA74; &#xD30C;&#xC774;&#xD504;&#xB85C;&#xBD80;&#xD130; read &#xAC00; &#xB418;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
</ol>
<pre><code class="lang-c"><span class="hljs-comment">/*
 *  &#xB2E4;&#xC74C;&#xC740; &quot;cat /proc/self/maps | grep libc&quot; &#xBA85;&#xB839;&#xACFC; &#xAC19;&#xC740; &#xC5ED;&#xD560;&#xC744; &#xD569;&#xB2C8;&#xB2E4;.
 *  child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; maps &#xD30C;&#xC77C;&#xC744; &#xC77D;&#xC5B4;&#xC11C; &#xD30C;&#xC774;&#xD504;&#xB85C; &#xCD9C;&#xB825;&#xC744; &#xD558;&#xBA74; parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; 
 *  &#xD30C;&#xC774;&#xD504;&#xB97C; &#xD1B5;&#xD574; &#xB77C;&#xC778;&#xC744; &#xBC1B;&#xC544;&#xC11C; &quot;libc&quot; &#xC2A4;&#xD2B8;&#xB9C1;&#xC774; &#xC874;&#xC7AC;&#xD560; &#xACBD;&#xC6B0; &#xCD9C;&#xB825;&#xC744; &#xD569;&#xB2C8;&#xB2E4;.
**/</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;string.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/wait.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>
</span>{
    <span class="hljs-keyword">int</span> fd[<span class="hljs-number">2</span>]; pipe(fd);  <span class="hljs-comment">// &#xD30C;&#xC774;&#xD504; &#xC0DD;&#xC131;</span>
    <span class="hljs-keyword">char</span> *line = <span class="hljs-literal">NULL</span>; 
    <span class="hljs-keyword">size_t</span> len = <span class="hljs-number">0</span>;

    <span class="hljs-keyword">if</span> (fork() &gt; <span class="hljs-number">0</span>) <span class="hljs-keyword">goto</span> parent;

    dup2(fd[<span class="hljs-number">1</span>], STDOUT_FILENO);   <span class="hljs-comment">// child &#xD504;&#xB85C;&#xC138;&#xC2A4;</span>
    close(fd[<span class="hljs-number">0</span>]); close(fd[<span class="hljs-number">1</span>]);
    FILE *fp = fopen(<span class="hljs-string">&quot;/proc/self/maps&quot;</span>, <span class="hljs-string">&quot;r&quot;</span>);
    <span class="hljs-keyword">while</span> (getline(&amp;line, &amp;len, fp) != -<span class="hljs-number">1</span>) 
        <span class="hljs-built_in">fputs</span>(line, <span class="hljs-built_in">stdout</span>);      <span class="hljs-comment">// &#xC774;&#xC81C; stdout &#xC73C;&#xB85C; &#xCD9C;&#xB825;&#xD558;&#xBA74; &#xD30C;&#xC774;&#xD504;&#xB85C; &#xC4F0;&#xAE30;&#xAC00; &#xB41C;&#xB2E4;.</span>
    fflush(<span class="hljs-built_in">stdout</span>);
    _exit(EXIT_SUCCESS);

parent:
    dup2(fd[<span class="hljs-number">0</span>], STDIN_FILENO);
    close(fd[<span class="hljs-number">0</span>]); close(fd[<span class="hljs-number">1</span>]);
    <span class="hljs-keyword">while</span> (getline(&amp;line, &amp;len, <span class="hljs-built_in">stdin</span>) != -<span class="hljs-number">1</span>)    <span class="hljs-comment">// stdin &#xC744; &#xC77D;&#xC73C;&#xBA74; &#xD30C;&#xC774;&#xD504;&#xB85C; &#xBD80;&#xD130;</span>
    {                                            <span class="hljs-comment">// &#xC77D;&#xAE30;&#xAC00; &#xB41C;&#xB2E4;.</span>
        <span class="hljs-keyword">if</span> (argc &gt; <span class="hljs-number">1</span>) {
            <span class="hljs-keyword">if</span> (<span class="hljs-built_in">strstr</span>(line, argv[<span class="hljs-number">1</span>]) != <span class="hljs-literal">NULL</span>)
                <span class="hljs-built_in">fputs</span>(line, <span class="hljs-built_in">stdout</span>);
        } <span class="hljs-keyword">else</span>
            <span class="hljs-built_in">fputs</span>(line, <span class="hljs-built_in">stdout</span>);
    }                             <span class="hljs-comment">// while &#xBB38; &#xB300;&#xC2E0;&#xC5D0; system(&quot;wc&quot;); &#xB97C; &#xD574;&#xB3C4; &#xB41C;&#xB2E4;.</span>
    wait(<span class="hljs-literal">NULL</span>);
    <span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
}
---------------------------------------

$ gcc pipe.c

$ ./a.out libc
<span class="hljs-number">7f</span>b00b520000-<span class="hljs-number">7f</span>b00b546000 r--p <span class="hljs-number">00000000</span> . . . /usr/lib/x86_64-linux-gnu/libc-<span class="hljs-number">2.32</span>.so
<span class="hljs-number">7f</span>b00b546000-<span class="hljs-number">7f</span>b00b6b3000 r-xp <span class="hljs-number">00026000</span> . . . /usr/lib/x86_64-linux-gnu/libc-<span class="hljs-number">2.32</span>.so
<span class="hljs-number">7f</span>b00b6b3000-<span class="hljs-number">7f</span>b00b6ff000 r--p <span class="hljs-number">00193000</span> . . . /usr/lib/x86_64-linux-gnu/libc-<span class="hljs-number">2.32</span>.so
. . .
</code></pre>
<p>shell &#xC5D0;&#xC11C;&#xB294; pipe &#xD568;&#xC218;&#xB97C; &#xC774;&#xC6A9;&#xD574; &#xC9C1;&#xC811; &#xD30C;&#xC774;&#xD504;&#xB97C; &#xC0DD;&#xC131;&#xD560; &#xC218; &#xC5C6;&#xAE30; &#xB54C;&#xBB38;&#xC5D0;
named pipe &#xBC29;&#xC2DD;&#xC744; &#xC774;&#xC6A9;&#xD558;&#xB294;&#xB370; pipe &#xB294; &#xAE30;&#xBCF8;&#xC801;&#xC73C;&#xB85C; 
&#xC77D;&#xAE30;&#xC640; &#xC4F0;&#xAE30; &#xC2DC; &#xC0C1;&#xB300;&#xBC29;&#xC774; &#xC5C6;&#xC744; &#xACBD;&#xC6B0; &#xBE14;&#xB85D; &#xB429;&#xB2C8;&#xB2E4;.</p>
<video width="770" height="394" controls preload="auto">
  <source src="images/strace/pipe.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>



<p><a name="bash-sh"></a></p>
<h3 id="bash-&#xC640;-sh-&#xC5D0;&#xC11C;&#xC758;-int-signal-handler-&#xAC00;-&#xCC98;&#xB9AC;&#xB418;&#xB294;-&#xBC29;&#xC2DD;&#xC758;-&#xCC28;&#xC774;&#xC810;">bash &#xC640; sh &#xC5D0;&#xC11C;&#xC758; INT signal handler &#xAC00; &#xCC98;&#xB9AC;&#xB418;&#xB294; &#xBC29;&#xC2DD;&#xC758; &#xCC28;&#xC774;&#xC810;</h3>
<p><a href="signals_and_traps.html">Signals and Traps</a> &#xBA54;&#xB274;&#xC5D0; &#xBCF4;&#xBA74; a.sh -&gt; b.sh -&gt; c.sh &#xC21C;&#xC11C;&#xB85C; &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xAC00;
&#xC2E4;&#xD589;&#xB410;&#xC744;&#xB54C; Ctrl-c &#xC5D0; &#xC758;&#xD574; INT handler &#xAC00; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xC21C;&#xC11C;&#xB97C; <code>bash</code> &#xC640; <code>sh</code> &#xB97C; &#xBE44;&#xAD50;&#xD558;&#xC5EC; &#xC124;&#xBA85;&#xD574; &#xB193;&#xC740; &#xBD80;&#xBD84;&#xC774; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xB2E4;&#xC2DC;&#xD55C;&#xBC88; &#xC0C1;&#xAE30;&#xD574;&#xBCF4;&#xBA74; &#xC544;&#xBB34;&#xB7F0; trap &#xC124;&#xC815;&#xB3C4; &#xC548;&#xD55C; &#xC0C1;&#xD0DC;&#xC5D0;&#xC11C;&#xB294; bash &#xC640; sh &#xC758; default handler &#xAC00; &#xCC98;&#xB9AC;&#xB418;&#xB294; &#xBC29;&#xC2DD;&#xC774; &#xCC28;&#xC774;&#xAC00; &#xC5C6;&#xC9C0;&#xB9CC;
child process &#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xC790; trap handler &#xAC00; &#xC2E4;&#xD589;&#xB420; &#xACBD;&#xC6B0; &#xC774;&#xD6C4; parent &#xC758; default handler &#xC2E4;&#xD589;&#xC5D0; &#xCC28;&#xC774;&#xC810;&#xC774; &#xC788;&#xB2E4;&#xB294; &#xAC83;&#xC778;&#xB370;&#xC694;.
&#xC774;&#xC640; &#xAC19;&#xC774; &#xCC28;&#xC774;&#xC810;&#xC774; &#xC0DD;&#xAE30;&#xB294; &#xC6D0;&#xC778;&#xC744; strace &#xB97C; &#xD1B5;&#xD574; &#xC54C;&#xC544;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p>trace &#xC5D0; &#xC0AC;&#xC6A9;&#xB418;&#xB294; &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xB294; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC2B5;&#xB2C8;&#xB2E4;.
shebang &#xB77C;&#xC778;&#xC744; <code>#!/bin/sh</code> &#xACFC; <code>#!/bin/bash</code> &#xB85C; &#xBC14;&#xAFB8;&#xC5B4;&#xAC00;&#xBA70; trace &#xB97C; &#xD574;&#xBCF4;&#xACE0;
B.sh &#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xC790; trap &#xC124;&#xC815;&#xC744; on , off &#xD574;&#xAC00;&#xBA74;&#xC11C; &#xAC01;&#xAC01; trace &#xD574;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<blockquote>
<p>signal &#xC5D0; &#xB300;&#xD55C; overview &#xB294; <code>man 7 signal</code> &#xC744; &#xCC38;&#xC870;&#xD558;&#xC138;&#xC694;</p>
</blockquote>
<pre><code class="lang-bash">----------- A.sh -----------
<span class="hljs-shebang">#!/bin/sh</span>
<span class="hljs-shebang">#!/bin/bash
</span>
<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;A.sh.....start&quot;</span>

./B.sh

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;A.sh.....end&quot;</span>

----------- B.sh -----------
<span class="hljs-shebang">#!/bin/sh</span>
<span class="hljs-shebang">#!/bin/bash
</span>
<span class="hljs-comment">#trap &quot;echo TRAP --- B.sh&quot;  INT</span>

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;B.sh........start&quot;</span>

cat

<span class="hljs-built_in">echo</span> <span class="hljs-string">&quot;B.sh........end&quot;</span>
</code></pre>
<h4 id="binsh-trap-off">/bin/sh, trap OFF</h4>
<p><code>/bin/sh</code> shebang &#xB77C;&#xC778;&#xC5D0; B.sh &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8; &#xC5D0;&#xC11C; trap &#xC124;&#xC815;&#xC744; OFF &#xD55C; &#xC0C1;&#xD0DC;&#xC785;&#xB2C8;&#xB2E4;.<br>&#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xB97C; &#xC2E4;&#xD589;&#xD574; &#xBCF4;&#xBA74; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC740; &#xACB0;&#xACFC;&#xAC00; &#xB098;&#xC635;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">$ ./A.sh 
A.sh.....start
B.sh........start
^C                    <span class="hljs-comment"># cat &#xBA85;&#xB839;&#xC758; &#xC785;&#xB825; &#xB300;&#xAE30; &#xC0C1;&#xD0DC;&#xC5D0;&#xC11C; Ctrl-c &#xC5D0; &#xC758;&#xD55C; &#xC885;&#xB8CC;</span>
                      <span class="hljs-comment"># A.sh, B.sh &#xBAA8;&#xB450; default INT handler &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB428;</span>
</code></pre>
<p>&#xC774;&#xBC88;&#xC5D0;&#xB294; strace &#xBA85;&#xB839;&#xC73C;&#xB85C; &#xC2E4;&#xC81C; &#xB0B4;&#xBD80;&#xC801;&#xC73C;&#xB85C; &#xC5B4;&#xB5A4; &#xC77C;&#xC774; &#xC77C;&#xC5B4;&#xB098;&#xB294;&#xC9C0; trace &#xD574;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &apos;-e&apos; &#xC635;&#xC158; &#xAC12;&#xC73C;&#xB85C; process, signal &#xADF8;&#xB8F9;&#xACFC; &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xBCF4;&#xAE30; &#xC704;&#xD574; write &#xD568;&#xC218;&#xB97C; &#xC124;&#xC815;&#xD558;&#xC600;&#xC2B5;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &apos;-I3&apos; &#xC635;&#xC158;&#xC740; trace &#xC911;&#xC5D0; ctrl-c &#xB97C; &#xB204;&#xB97C; &#xACBD;&#xC6B0; strace &#xBA85;&#xB839; &#xC790;&#xCCB4;&#xAC00; &#xC885;&#xB8CC;&#xB418;&#xC9C0; &#xC54A;&#xAC8C; fatal siganl &#xC744;</span>
<span class="hljs-comment"># block &#xD569;&#xB2C8;&#xB2E4;. &apos;-o&apos; &#xC635;&#xC158;&#xC744; &#xC0AC;&#xC6A9;&#xD560; &#xACBD;&#xC6B0; &#xB514;&#xD3F4;&#xD2B8;&#xB85C; &#xC124;&#xC815;&#xB418;&#xC9C0;&#xB9CC; &#xC124;&#xBA85;&#xC744; &#xC704;&#xD574; &#xCD94;&#xAC00;&#xD558;&#xC600;&#xC2B5;&#xB2C8;&#xB2E4;.</span>

$ strace -o sh.strace <span class="hljs-operator">-e</span> %process,%signal,write <span class="hljs-operator">-f</span> -I3 ./A.sh
</code></pre>
<p><img src="images/strace/strace-sh.png" alt=""></p>
<ol>
<li><p>&#xC67C;&#xCABD;&#xC5D0; &#xB178;&#xB780;&#xC0C9;&#xC73C;&#xB85C; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xBC88;&#xD638;&#xAC00; pid &#xC785;&#xB2C8;&#xB2E4;. 28224, 28225, 28226 &#xC138; &#xAC1C;&#xC758; &#xBC88;&#xD638;&#xAC00; &#xBCF4;&#xC774;&#xB294; &#xAC78;&#xB85C; &#xBD10;&#xC11C;
28224 &#xB294; A.sh, 28225 &#xB294; B.sh, 28226 &#xBC88;&#xC740; cat &#xBA85;&#xB839;&#xC758; pid &#xC785;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>1&#xBC88; &#xB77C;&#xC778;: &#xC81C;&#xC77C; &#xCC98;&#xC74C; &#xB77C;&#xC778;&#xC5D0; A.sh &#xC758; exec &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>5&#xBC88;: rt_sigaction &#xD568;&#xC218;&#xB294; shell &#xC5D0;&#xC11C; trap &#xC124;&#xC815;&#xD558;&#xB294; &#xAC83;&#xACFC; &#xAC19;&#xC774; signal handler &#xB97C; &#xC124;&#xC815;&#xD558;&#xB294; &#xC5ED;&#xD560;&#xC744; &#xD569;&#xB2C8;&#xB2E4;.
&#xB179;&#xC0C9; &#xBC15;&#xC2A4;&#xC5D0; &#xBCF4;&#xBA74; SIGINT handler &#xB97C; &#xC124;&#xC815;&#xD558;&#xACE0; &#xC788;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xB450; &#xBC88;&#xC9F8; &#xC778;&#xC218; &#xAC12;&#xC740; SIG_DFL ( default handler ), SIG_IGN ( &#xC2E0;&#xD638; ignore ) &#xC640; &#xAC19;&#xC740; &#xAC12;&#xC774; &#xC62C; &#xC218; &#xC788;&#xB294;&#xB370;
&#xC8FC;&#xC18C;&#xAC12;&#xC774; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xAC78;&#xB85C; &#xBD10;&#xC11C; &#xC0AC;&#xC6A9;&#xC790; handler &#xAC00; &#xC124;&#xC815;&#xB418;&#xACE0; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xB2E4;&#xC2DC; &#xB9D0;&#xD574;&#xC11C; INT &#xC2E0;&#xD638;&#xB97C; &#xBC1B;&#xAC8C; &#xB418;&#xBA74; default handler &#xC5D0; &#xC758;&#xD574; &#xBC14;&#xB85C; &#xC885;&#xB8CC;&#xB418;&#xC9C0; &#xC54A;&#xC744; &#xAC83;&#xC785;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>10 ~ 12&#xBC88;: write &#xD568;&#xC218;&#xB85C; A.sh &#xC5D0;&#xC11C;&#xC758; start &#xBA54;&#xC2DC;&#xC9C0;&#xB97C; &#xD45C;&#xC2DC;&#xD558;&#xACE0; B.sh child process &#xC0DD;&#xC131;&#xC744; &#xC704;&#xD55C;
clone &#xD568;&#xC218;&#xB97C; &#xC2E4;&#xD589;&#xD558;&#xACE0; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;. &#xBC14;&#xB85C;&#xC774;&#xC5B4;&#xC11C; wait &#xD568;&#xC218;&#xAC00; &#xC2E4;&#xD589;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>13&#xBC88;: &#xC774;&#xC81C; pid &#xAC00; &#xBC14;&#xB00C;&#xC5B4;&#xC11C; &#xB2E4;&#xC74C;&#xC5D0; &#xBCF4;&#xC774;&#xB294; exec &#xD568;&#xC218;&#xB294; B.sh &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0;&#xC11C; &#xC2E4;&#xD589;&#xB429;&#xB2C8;&#xB2E4;.
A.sh &#xC5D0;&#xC11C;&#xC640; &#xB9C8;&#xCC2C;&#xAC00;&#xC9C0;&#xB85C; &#xB179;&#xC0C9; &#xBC15;&#xC2A4;&#xC5D0;&#xC11C; SIGINT handler &#xB97C; &#xC124;&#xC815;&#xD558;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>&#xB3D9;&#xC77C;&#xD55C; &#xACFC;&#xC815;&#xC744; &#xAC70;&#xCCD0;&#xC11C; cat &#xBA85;&#xB839;&#xC758; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB3C4; &#xC0DD;&#xC131;&#xC774; &#xB418;&#xC9C0;&#xB9CC; &#xD55C;&#xAC00;&#xC9C0; &#xCC28;&#xC774;&#xC810;&#xC774; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
cat &#xBA85;&#xB839;&#xC758; &#xACBD;&#xC6B0; exec &#xD6C4;&#xC5D0; &#xBCC4;&#xB3C4;&#xB85C; SIGINT handler &#xB97C; &#xC124;&#xC815;&#xD558;&#xC9C0; &#xC54A;&#xACE0; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB7EC;&#xBBC0;&#xB85C; INT &#xC2E0;&#xD638;&#xAC00; &#xC804;&#xB2EC;&#xB41C;&#xB2E4;&#xBA74; &#xBC14;&#xB85C; default handler &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB420; &#xAC83;&#xC785;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>29, 30, 31 &#xB77C;&#xC778;&#xC744; &#xBCF4;&#xBA74; &#xC138; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0;&#xAC8C; &#xBAA8;&#xB450; SIGINT &#xC2E0;&#xD638;&#xAC00; KERNEL &#xB85C;&#xBD80;&#xD130; &#xC804;&#xB2EC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
cat &#xBA85;&#xB839;&#xC758; &#xC785;&#xB825; &#xB300;&#xAE30; &#xC0C1;&#xD0DC;&#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xC790;&#xAC00; Ctrl-c &#xD0A4;&#xB97C; &#xB204;&#xB978; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>37&#xBC88;: cat &#xBA85;&#xB839;&#xC740; &#xBC14;&#xB85C; INT &#xC2E0;&#xD638;&#xC5D0; &#xC758;&#xD574; killed &#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>38&#xBC88;: cat &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; &#xC885;&#xB8CC;&#xB41C; &#xD6C4; parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; B.sh &#xC758; wait &#xD568;&#xC218;&#xAC12;&#xC774; &#xC124;&#xC815;&#xB418;&#xC5C8;&#xC2B5;&#xB2C8;&#xB2E4;.
exit &#xC5D0; &#xC758;&#xD574; &#xC815;&#xC0C1; &#xC885;&#xB8CC;&#xB41C; &#xAC83;&#xC774; &#xC544;&#xB2C8;&#xB77C; signal &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB418;&#xC5C8;&#xACE0; &#xC774;&#xB54C; &#xC2E0;&#xD638;&#xB294; SIGINT &#xB77C;&#xB294; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>42&#xBC88; &#xB77C;&#xC778;&#xC744; &#xBCF4;&#xBA74; B.sh &#xC740; &#xB2E4;&#xC2DC; rt_sigaction &#xD568;&#xC218;&#xB97C; &#xC774;&#xC6A9;&#xD574; SIGINT handler &#xB97C; default handler ( SIG_DFL )
&#xB85C; &#xC124;&#xC815;&#xD558;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB9AC;&#xACE0; &#xBC14;&#xB85C; &#xC790;&#xAE30; &#xC790;&#xC2E0;&#xC5D0;&#xAC8C; INT &#xC2E0;&#xD638;&#xB97C; &#xBCF4;&#xB0B4; killed &#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>A.sh &#xB3C4; &#xB9C8;&#xCC2C;&#xAC00;&#xC9C0;&#xB85C; B.sh &#xACFC; &#xAC19;&#xC740; &#xD615;&#xC2DD;&#xC73C;&#xB85C; &#xC885;&#xB8CC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
</ol>
<h4 id="binsh-trap-on">/bin/sh, trap ON</h4>
<p><code>/bin/sh</code> shebang &#xB77C;&#xC778;&#xC5D0; B.sh &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xC5D0;&#xC11C; trap &#xC124;&#xC815;&#xC744; ON &#xD55C; &#xC0C1;&#xD0DC;&#xC785;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">./A.sh 
A.sh.....start
B.sh........start
^CTRAP --- B.sh         <span class="hljs-comment"># Ctrl-c &#xC785;&#xB825;&#xC5D0; &#xC758;&#xD574; &#xC0AC;&#xC6A9;&#xC790; trap handler &#xAC00; &#xC2E4;&#xD589;&#xB418;&#xACE0;</span>
B.sh........end         <span class="hljs-comment"># B.sh &#xC758; &#xB098;&#xBA38;&#xC9C0; &#xBD80;&#xBD84;&#xB3C4; &#xC2E4;&#xD589;&#xB418;&#xB098;</span>
                        <span class="hljs-comment"># A.sh &#xC758; &#xACBD;&#xC6B0;&#xB294; default handler &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;</span>
</code></pre>
<p><img src="images/strace/strace-sh-trap.png" alt=""></p>
<ol>
<li><p>&#xC774;&#xBC88;&#xC5D0;&#xB294; pid &#xBC88;&#xD638;&#xAC00; A.sh, B.sh, cat &#xAC01;&#xAC01; 29013, 29014, 29015 &#xC5D0; &#xD574;&#xB2F9;&#xD569;&#xB2C8;&#xB2E4;.
&#xC804;&#xBC18; &#xBD80;&#xBD84;&#xC740; &#xC774;&#xC804;&#xACFC; &#xB3D9;&#xC77C;&#xD558;&#xAC8C; &#xC9C4;&#xD589;&#xB418;&#xBBC0;&#xB85C; &#xC0DD;&#xB7B5;&#xD558;&#xC600;&#xACE0; &#xC138; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; SIGINT &#xC2E0;&#xD638;&#xAC00; &#xC804;&#xB2EC;&#xB418;&#xB294; &#xBD80;&#xBD84;&#xBD80;&#xD130; &#xC0B4;&#xD3B4;&#xBCF4;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>37&#xBC88; &#xB77C;&#xC778;: cat &#xBA85;&#xB839;&#xC774; default INT handler &#xC5D0; &#xC758;&#xD574; killed &#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>39&#xBC88;: cat &#xBA85;&#xB839;&#xC758; parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; B.sh &#xC758; wait &#xD568;&#xC218;&#xAC12;&#xC774; &#xC124;&#xC815;&#xB418;&#xC5C8;&#xC2B5;&#xB2C8;&#xB2E4;.<br>child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; signal &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB418;&#xC5C8;&#xACE0; &#xC774;&#xB54C; &#xC2E0;&#xD638;&#xAC12;&#xC740; SIGINT &#xC785;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>42&#xBC88; &#xB77C;&#xC778;&#xBD80;&#xD130; &#xC2DC;&#xC791;&#xD558;&#xB294; &#xB179;&#xC0C9; &#xBC15;&#xC2A4;&#xB97C; &#xBCF4;&#xBA74; B.sh &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xC5D0; &#xC124;&#xC815;&#xB41C; &#xC0AC;&#xC6A9;&#xC790; trap handler &#xAC00; &#xC2E4;&#xD589;&#xB418;&#xC5B4;
&#xBA54;&#xC2DC;&#xC9C0;&#xAC00; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;. &#xADF8;&#xB9AC;&#xACE0; &#xC774;&#xC5B4; B.sh &#xC758; &#xB098;&#xBA38;&#xC9C0; &#xBD80;&#xBD84;&#xC774; &#xC2E4;&#xD589;&#xB418;&#xACE0; exit &#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>46&#xBC88;: B.sh &#xC758; parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; A.sh &#xC758; wait &#xD568;&#xC218;&#xAC12;&#xC774; &#xC124;&#xC815;&#xB418;&#xC5C8;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774;&#xBC88;&#xC5D0;&#xB294; child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00;  signal &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB41C; &#xAC83;&#xC774; &#xC544;&#xB2C8;&#xB77C; exit &#xC5D0; &#xC758;&#xD574; &#xC815;&#xC0C1; &#xC885;&#xB8CC;&#xB418;&#xC5C8;&#xACE0;
&#xC774;&#xB54C; &#xC885;&#xB8CC;&#xC0C1;&#xD0DC; &#xAC12;&#xC740; 0 &#xC774;&#xB77C;&#xB294; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>50&#xBC88;: A.sh &#xC740; rt_sigaction &#xD568;&#xC218;&#xB97C; &#xC774;&#xC6A9;&#xD574; SIGINT handler &#xB97C; default handler ( SIG_DFL )
&#xB85C; &#xC124;&#xC815;&#xD558;&#xACE0; &#xC790;&#xAE30; &#xC790;&#xC2E0;&#xC5D0; INT &#xC2E0;&#xD638;&#xB97C; &#xBCF4;&#xB0B4; killed &#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
</ol>
<h4 id="binbash-trap-off">/bin/bash, trap OFF</h4>
<p><code>/bin/bash</code> shebang &#xB77C;&#xC778;&#xC5D0; B.sh &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8; &#xC5D0;&#xC11C; trap &#xC124;&#xC815;&#xC744; OFF &#xD55C; &#xC0C1;&#xD0DC; &#xC785;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">$ ./A.sh 
A.sh.....start
B.sh........start
^C                    <span class="hljs-comment"># ctrl-c &#xC5D0; &#xC758;&#xD55C; &#xC885;&#xB8CC;</span>
                      <span class="hljs-comment"># A.sh, B.sh &#xBAA8;&#xB450; default handler &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC; (sh &#xACFC; &#xB3D9;&#xC77C;)</span>
</code></pre>
<p><img src="images/strace/strace-bash.png" alt=""></p>
<ol>
<li>&#xC774;&#xBC88;&#xC5D0;&#xB294; shebang &#xB77C;&#xC778;&#xC774; &#xBC14;&#xB00C;&#xC5B4; <code>bash</code> &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8;&#xC785;&#xB2C8;&#xB2E4;.
bash &#xC758; &#xACBD;&#xC6B0; sh &#xC5D0; &#xBE44;&#xD574; system call &#xC774; &#xB9CE;&#xC774; &#xBC1C;&#xC0DD;&#xD574;&#xC11C; &#xC880; &#xBCF4;&#xAE30; &#xC88B;&#xAC8C; &#xC815;&#xB9AC;&#xB97C; &#xD558;&#xC600;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC5B4;&#xCA0C;&#xB4E0; &#xACB0;&#xACFC;&#xB97C; &#xBCF4;&#xBA74; B.sh &#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xC790; trap &#xC124;&#xC815;&#xC744; OFF &#xD55C; &#xC0C1;&#xD0DC;&#xC5D0;&#xC11C;&#xB294;
<code>sh</code> &#xC5D0;&#xC11C;&#xC640; &#xCC28;&#xC774;&#xAC00; &#xC5C6;&#xC774; &#xB3D9;&#xC77C;&#xD558;&#xAC8C; default handler &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</li>
</ol>
<h4 id="binbash-trap-on">/bin/bash, trap ON</h4>
<p><code>/bin/bash</code> shebang &#xB77C;&#xC778;&#xC5D0; B.sh &#xC2A4;&#xD06C;&#xB9BD;&#xD2B8; &#xC5D0;&#xC11C; trap &#xC124;&#xC815;&#xC744; ON &#xD55C; &#xC0C1;&#xD0DC; &#xC785;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash">A.sh.....start
B.sh........start
^CTRAP --- B.sh       <span class="hljs-comment"># Ctrl-c &#xC785;&#xB825;&#xC5D0; &#xC758;&#xD574; &#xC0AC;&#xC6A9;&#xC790; trap handler &#xAC00; &#xC2E4;&#xD589;&#xB418;&#xACE0;</span>
B.sh........end       <span class="hljs-comment"># B.sh &#xC758; &#xB098;&#xBA38;&#xC9C0; &#xBD80;&#xBD84;&#xB3C4; &#xC2E4;&#xD589;&#xB418;&#xACE0;</span>
A.sh.....end          <span class="hljs-comment"># sh &#xACFC; &#xB2EC;&#xB9AC; A.sh &#xC758; &#xB098;&#xBA38;&#xC9C0; &#xBD80;&#xBD84;&#xB3C4; &#xC2E4;&#xD589;&#xB429;&#xB2C8;&#xB2E4;.</span>
</code></pre>
<p><img src="images/strace/strace-bash-trap.png" alt=""></p>
<ol>
<li><p>103&#xBC88;: cat &#xBA85;&#xB839;&#xC774; SIGINT &#xC2E0;&#xD638;&#xB97C; &#xBC1B;&#xACE0; default INT handler &#xC5D0; &#xC758;&#xD574; killed &#xB418;&#xC5C8;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>104&#xBC88;: parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; B.sh &#xC758; wait &#xD568;&#xC218;&#xAC12;&#xC774; &#xC124;&#xC815;&#xB418;&#xC5C8;&#xC2B5;&#xB2C8;&#xB2E4;.<br>child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; signal &#xC5D0; &#xC758;&#xD574; &#xC885;&#xB8CC;&#xB418;&#xC5C8;&#xACE0; &#xC774;&#xB54C; &#xC2E0;&#xD638;&#xB294; SIGINT &#xB77C;&#xB294; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>105&#xBC88;: B.sh &#xC758; &#xC0AC;&#xC6A9;&#xC790; trap handler &#xAC00; &#xC2E4;&#xD589;&#xB418;&#xC5B4; &#xBA54;&#xC2DC;&#xC9C0;&#xAC00; &#xD45C;&#xC2DC;&#xB429;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>108~110&#xBC88;: B.sh &#xC758; &#xB098;&#xBA38;&#xC9C0; &#xBD80;&#xBD84;&#xB3C4; &#xC2E4;&#xD589;&#xC774; &#xB418;&#xACE0; exit &#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>111&#xBC88;: B.sh &#xC758; parent &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0; &#xD574;&#xB2F9;&#xD558;&#xB294; A.sh &#xC758; wait &#xD568;&#xC218;&#xAC12;&#xC774; &#xC124;&#xC815;&#xB418;&#xC5C8;&#xC2B5;&#xB2C8;&#xB2E4;.<br>child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; exit &#xC5D0; &#xC758;&#xD574; &#xC815;&#xC0C1; &#xC885;&#xB8CC;&#xD558;&#xC600;&#xACE0; &#xC774;&#xB54C; &#xC885;&#xB8CC; &#xC0C1;&#xD0DC; &#xAC12;&#xC740; 0 &#xC778; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
<li><p>112&#xBC88; &#xC904;&#xC744; &#xBCF4;&#xBA74; A.sh &#xC740; rt_sigaction &#xD568;&#xC218;&#xB97C; &#xC774;&#xC6A9;&#xD574; SIGINT handler &#xB97C; default handler ( SIG_DFL )
&#xB85C; &#xC124;&#xC815;&#xD558;&#xC9C0;&#xB9CC; &#xC774;&#xD6C4;&#xC5D0; sh &#xC5D0;&#xC11C;&#xC640; &#xAC19;&#xC774; &#xC790;&#xAE30; &#xC790;&#xC2E0;&#xC5D0;&#xAC8C; INT &#xC2E0;&#xD638;&#xB97C; &#xBCF4;&#xB0B4; &#xC885;&#xB8CC;&#xD558;&#xC9C0; &#xC54A;&#xACE0; 
A.sh &#xC758; &#xB098;&#xBA38;&#xC9C0; &#xBA85;&#xB839;&#xC744; &#xC2E4;&#xD589;&#xD558;&#xACE0; exit &#xD558;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</li>
</ol>
<p>&#xADF8;&#xB7EC;&#xB2C8;&#xAE4C; <code>bash</code> &#xC640; <code>sh</code> &#xBAA8;&#xB450; &#xC0AC;&#xC6A9;&#xC790;&#xAC00; signal handler &#xB97C; &#xB4F1;&#xB85D;&#xD558;&#xC9C0; &#xC54A;&#xC558;&#xC744; &#xACBD;&#xC6B0;
&#xC790;&#xC2E0;&#xC758; signal handler &#xB97C; &#xB4F1;&#xB85D;&#xD574; &#xCC98;&#xB9AC;&#xD558;&#xB294;&#xB370; <code>bash</code> &#xC758; &#xACBD;&#xC6B0;&#xB294; child &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00;
&#xC815;&#xC0C1; &#xC885;&#xB8CC;&#xD558;&#xC600;&#xB294;&#xC9C0; &#xC544;&#xB2C8;&#xBA74; signal &#xC5D0; &#xC758;&#xD574; &#xBE44;&#xC815;&#xC0C1; &#xC885;&#xB8CC;&#xD558;&#xC600;&#xB294;&#xC9C0;&#xB97C; &#xCCB4;&#xD06C;&#xD558;&#xC5EC; &#xADF8;&#xC5D0;&#xB530;&#xB77C;
&#xB098;&#xBA38;&#xC9C0; &#xBA85;&#xB839;&#xB4E4;&#xC744; &#xC2E4;&#xD589;&#xD558;&#xAC70;&#xB098;, &#xC544;&#xB2C8;&#xBA74; default handler &#xB85C; &#xC124;&#xC815; &#xD6C4; &#xC790;&#xC2E0;&#xC5D0;&#xAC8C; INT &#xC2E0;&#xD638;&#xB97C;
&#xBCF4;&#xB0B4; &#xC885;&#xB8CC;&#xD558;&#xC9C0;&#xB9CC;, <code>sh</code> &#xC758; &#xACBD;&#xC6B0;&#xB294; &#xAD6C;&#xBD84;&#xC5C6;&#xC774; &#xBAA8;&#xB450; default handler &#xB85C; &#xC124;&#xC815;&#xD574; &#xC885;&#xB8CC;&#xD55C;&#xB2E4;&#xACE0; &#xBCF4;&#xBA74; &#xB418;&#xACA0;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<blockquote>
<p>strace &#xBA85;&#xB839;&#xC758; <code>-o</code> &#xC640; <code>-f</code> &#xC635;&#xC158;&#xC744; &#xC774;&#xC6A9;&#xD574; trace &#xD30C;&#xC77C;&#xC744; &#xC0DD;&#xC131;&#xD560; &#xB54C; &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xC544;&#xC774;&#xB514; &#xBCC4;&#xB85C; &#xBF51;&#xACE0; &#xC2F6;&#xC73C;&#xBA74;
<code>-f</code> &#xC635;&#xC158; &#xB300;&#xC2E0;&#xC5D0; <code>-ff</code> &#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xBA74; &#xB429;&#xB2C8;&#xB2E4;.</p>
</blockquote>
<p><a name="zombie"></a></p>
<h3 id="zombie-&#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC640;-wait-&#xC2DC;&#xC2A4;&#xD15C;&#xCF5C;-&#xD568;&#xC218;">Zombie &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC640; wait &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;</h3>
<p>&#xB2E4;&#xC74C; &#xC601;&#xC0C1;&#xC744; &#xD1B5;&#xD574;&#xC11C; shell &#xC5D0;&#xC11C; &#xC9C1;&#xC811; &#xC880;&#xBE44; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC0DD;&#xC131;&#xD558;&#xACE0; wait &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xC5D0; &#xC758;&#xD574; 
&#xD504;&#xB85C;&#xC138;&#xC2A4; &#xD14C;&#xC774;&#xBE14;&#xC5D0;&#xC11C; &#xC815;&#xB9AC;&#xB418;&#xB294; &#xACFC;&#xC815;&#xC744; &#xC54C;&#xC544;&#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<video width="770" height="316" controls preload="auto">
  <source src="images/strace/zombie_process.mp4" type="video/mp4">
  Your browser does not support the video tag.
</video>


<p><a name="flock"></a></p>
<h3 id="file-lock">File lock</h3>
<p><a href="mutual_exclusion.html">Mutual Exclusion</a> &#xBA54;&#xB274;&#xC5D0;&#xC11C; &#xC18C;&#xAC1C;&#xB41C; <code>flock</code> &#xBA85;&#xB839;&#xC740; <code>flock</code> &#xC2DC;&#xC2A4;&#xD15C; &#xCF5C;&#xC744; &#xC0AC;&#xC6A9;&#xD569;&#xB2C8;&#xB2E4;.
tmp.txt &#xD30C;&#xC77C;&#xC5D0; &#xCD08;&#xAE30;&#xAC12;&#xC73C;&#xB85C; <code>0</code> &#xC744; &#xC785;&#xB825;&#xD55C; &#xB2E4;&#xC74C; 3 &#xAC1C;&#xC758; background &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC0DD;&#xC131;&#xD574;&#xC11C;
&#xB3D9;&#xC2DC;&#xC5D0; <code>read ---&gt; &#xC77D;&#xC740; &#xAC12;&#xC5D0; +1 ---&gt; write</code> &#xC744; &#xAC01;&#xAC01; 100,000 &#xD68C;&#xC529; &#xBC18;&#xBCF5;&#xD574;&#xBCF4;&#xBA74;
&#xC77D;&#xACE0;, &#xC4F0;&#xAE30; &#xC791;&#xC5C5;&#xC774; &#xACB9;&#xCCD0;&#xC11C; &#xACB0;&#xACFC;&#xAC00; 300,000 &#xC774; &#xB418;&#xC9C0; &#xC54A;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774;&#xB54C; flock &#xC744; &#xC774;&#xC6A9;&#xD574; lock &#xC744; &#xAC78;&#xBA74; &#xD558;&#xB098;&#xC758; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB9CC; tmp.txt &#xD30C;&#xC77C;&#xC744; &#xC0AC;&#xC6A9;&#xD560; &#xC218; &#xC788;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-c">$ echo <span class="hljs-number">0</span> &gt; tmp.txt &amp;&amp; gcc -xc - &lt;&lt;\@ &amp;&amp; \
{ ./a.out &amp; ./a.out &amp; ./a.out &amp; } | cat; cat tmp.txt

<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span> </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span> </span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{ 
    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];
    FILE *fp = fopen(<span class="hljs-string">&quot;tmp.txt&quot;</span>, <span class="hljs-string">&quot;r+&quot;</span>);
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100000</span>; i++) {
        rewind(fp);
        fgets(buf, <span class="hljs-keyword">sizeof</span>(buf), fp);
        <span class="hljs-keyword">int</span> num = atoi(buf) + <span class="hljs-number">1</span>;
        rewind(fp);
        <span class="hljs-built_in">fprintf</span>(fp, <span class="hljs-string">&quot;%d\n&quot;</span>, num); 
    }
}
@

<span class="hljs-number">151132</span>      <span class="hljs-comment">// &#xC77D;&#xACE0; &#xC4F0;&#xAE30;&#xAC00; &#xACB9;&#xCCD0;&#xC11C; 300,000 &#xC774; &#xB418;&#xC9C0; &#xC54A;&#xB294;&#xB2E4;.</span>

---------------------------------------------------

$ echo <span class="hljs-number">0</span> &gt; tmp.txt &amp;&amp; gcc -xc - &lt;&lt;\@ &amp;&amp; \
{ ./a.out &amp; ./a.out &amp; ./a.out &amp; } | cat; cat tmp.txt 

<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span> </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span> </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;sys/file.h&gt;</span> </span>
<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">()</span> </span>{ 
    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">10</span>];
    FILE *fp = fopen(<span class="hljs-string">&quot;tmp.txt&quot;</span>, <span class="hljs-string">&quot;r+&quot;</span>);
    flock (fileno(fp), LOCK_EX);            <span class="hljs-comment">// tmp.txt &#xD30C;&#xC77C;&#xC758; fd &#xB97C; &#xC774;&#xC6A9;&#xD574; flock</span>
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= <span class="hljs-number">100000</span>; i++) {
        rewind(fp);
        fgets(buf, <span class="hljs-keyword">sizeof</span>(buf), fp);
        <span class="hljs-keyword">int</span> num = atoi(buf) + <span class="hljs-number">1</span>;
        rewind(fp);
        <span class="hljs-built_in">fprintf</span>(fp, <span class="hljs-string">&quot;%d\n&quot;</span>, num); 
    }
    flock(fileno(fp), LOCK_UN);             <span class="hljs-comment">// flock &#xD574;&#xC81C;</span>
}
@

<span class="hljs-number">300000</span>
</code></pre>
<p><a name="thread"></a></p>
<h3 id="thread">Thread</h3>
<p>&#xB2E4;&#xC74C;&#xC740; pthread &#xB97C; &#xC774;&#xC6A9;&#xD574; 2 &#xAC1C;&#xC758; &#xC2A4;&#xB808;&#xB4DC;&#xB97C; &#xC0DD;&#xC131;&#xD558;&#xB294; &#xACBD;&#xC6B0;&#xC778;&#xB370;&#xC694;.
&#xD504;&#xB85C;&#xC138;&#xC2A4;&#xB97C; &#xC0DD;&#xC131;&#xD560; &#xB54C;&#xC640; &#xB3D9;&#xC77C;&#xD558;&#xAC8C; clone &#xD568;&#xC218;&#xB97C; &#xC774;&#xC6A9;&#xD558;&#xACE0; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC2A4;&#xB808;&#xB4DC;&#xB294; &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xC8FC;&#xC18C;&#xACF5;&#xAC04; &#xB0B4;&#xC5D0;&#xC11C; &#xAC01;&#xC790; &#xC2E4;&#xD589;&#xC744; &#xC704;&#xD55C; stack &#xC744; &#xAC00;&#xC9C0;&#xBBC0;&#xB85C; child_stack &#xAC12;&#xC774; &#xC124;&#xC815;&#xB418;&#xC5B4; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
flags &#xC5D0; &#xBCF4;&#xC774;&#xB294; CLONE_VM &#xC740; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC640; &#xC8FC;&#xC18C;&#xACF5;&#xAC04;&#xC744; &#xACF5;&#xC720;&#xD55C;&#xB2E4;&#xB294; &#xC758;&#xBBF8;&#xC774;&#xACE0;
CLONE_FS &#xC740; &#xD30C;&#xC77C;&#xC2DC;&#xC2A4;&#xD15C;&#xC744; &#xACF5;&#xC720;, CLONE_FILES &#xC624;&#xD508; &#xD30C;&#xC77C;&#xB4E4;&#xC744; &#xACF5;&#xC720;, CLONE_SIGHAND &#xB294; signal handlers, blocked signals &#xC744; &#xACF5;&#xC720;&#xD55C;&#xB2E4;&#xB294; &#xC758;&#xBBF8;&#xC785;&#xB2C8;&#xB2E4;.
&#xC624;&#xB978;&#xCABD;&#xC73C;&#xB85C; &#xAC00;&#xC11C; tls ( thread local storage ) &#xC8FC;&#xC18C;&#xB3C4; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC2A4;&#xB808;&#xB4DC;&#xB294; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC640; &#xC8FC;&#xC18C;&#xACF5;&#xAC04;&#xC744; &#xACF5;&#xC720;&#xD558;&#xBBC0;&#xB85C; clone &#xD6C4;&#xC5D0; exec &#xC744; &#xD558;&#xC9C0; &#xC54A;&#xB294;&#xAC78; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<p><img src="images/thread3.png" alt=""></p>
<pre><code class="lang-C"><span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> _GNU_SOURCE</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span> </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">runfunc</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span>
</span>{
    <span class="hljs-keyword">int</span> no = (<span class="hljs-keyword">uintptr_t</span>)arg;

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;NO %d, SELF : %lu, TID : %d, PID : %d\n&quot;</span>
           ,no , pthread_self(), gettid(), getpid());

    <span class="hljs-comment">// return &#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xB41C; &#xAC12;&#xC740; &#xC2A4;&#xB808;&#xB4DC;&#xC758; &#xC885;&#xB8CC; &#xC0C1;&#xD0DC; &#xAC12;&#xC73C;&#xB85C; &#xC0AC;&#xC6A9;&#xB429;&#xB2C8;&#xB2E4;.</span>
    <span class="hljs-keyword">return</span> <span class="hljs-literal">NULL</span>;
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> 
</span>{
    <span class="hljs-keyword">int</span> num = argc &gt; <span class="hljs-number">1</span> ? atoi(argv[<span class="hljs-number">1</span>]) : <span class="hljs-number">1</span>;

    <span class="hljs-keyword">pthread_t</span> thread[num];

    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= num; i++)
        pthread_create(&amp;thread[i], <span class="hljs-literal">NULL</span>, runfunc, (<span class="hljs-keyword">void</span> *)(<span class="hljs-keyword">uintptr_t</span>) i);

    <span class="hljs-comment">// main &#xC2A4;&#xB808;&#xB4DC;&#xAC00; pthread_exit() &#xC744; &#xD558;&#xBA74; &#xBAA8;&#xB4E0; child &#xC2A4;&#xB808;&#xB4DC;&#xAC00; &#xC885;&#xB8CC;&#xB41C; &#xD6C4;&#xC5D0; &#xC885;&#xB8CC;&#xB429;&#xB2C8;&#xB2E4;.</span>
    pthread_exit(<span class="hljs-literal">NULL</span>);
}
-------------------------------------------------

$ gcc thread.c -pthread

$ ./a.out <span class="hljs-number">10</span>    <span class="hljs-preprocessor"># &#xC2A4;&#xB808;&#xB4DC; <span class="hljs-number">10</span> &#xAC1C;&#xB97C; &#xC0DD;&#xC131;</span>
NO <span class="hljs-number">1</span>, SELF : <span class="hljs-number">140010508047936</span>, TID : <span class="hljs-number">1589737</span>, PID : <span class="hljs-number">1589736</span>
NO <span class="hljs-number">4</span>, SELF : <span class="hljs-number">140010348652096</span>, TID : <span class="hljs-number">1589740</span>, PID : <span class="hljs-number">1589736</span>
NO <span class="hljs-number">3</span>, SELF : <span class="hljs-number">140010491262528</span>, TID : <span class="hljs-number">1589739</span>, PID : <span class="hljs-number">1589736</span>
NO <span class="hljs-number">5</span>, SELF : <span class="hljs-number">140010482869824</span>, TID : <span class="hljs-number">1589741</span>, PID : <span class="hljs-number">1589736</span>
NO <span class="hljs-number">2</span>, SELF : <span class="hljs-number">140010499655232</span>, TID : <span class="hljs-number">1589738</span>, PID : <span class="hljs-number">1589736</span>
. . .

$ strace -o thread.strace -f -e %process ./a.out <span class="hljs-number">10</span>
</code></pre>
<blockquote>
<p>thread &#xB294; &#xAC01; &#xD558;&#xB4DC;&#xC6E8;&#xC5B4; &#xBC34;&#xB354;&#xB9C8;&#xB2E4; &#xAD6C;&#xD604;&#xD558;&#xB294; &#xBC29;&#xBC95;&#xC774; &#xB2EC;&#xB77C;&#xC11C; &#xD504;&#xB85C;&#xADF8;&#xB798;&#xBA38;&#xAC00; portable &#xD55C; &#xCF54;&#xB4DC;&#xB97C; &#xC791;&#xC131;&#xD558;&#xAE30; &#xC5B4;&#xB824;&#xC6E0;&#xB2E4;&#xACE0; &#xD569;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB798;&#xC11C; IEEE CS &#xC5D0;&#xC11C; API &#xB97C; &#xD45C;&#xC900;&#xD654; &#xD55C;&#xAC83;&#xC774; POSIX thread (pthread) &#xB85C; &#xD604;&#xC7AC;&#xB294; &#xB300;&#xBD80;&#xBD84;&#xC758; &#xBC34;&#xB354;&#xB4E4;&#xC774; pthread API &#xB97C; &#xC81C;&#xACF5;&#xD558;&#xACE0; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
</blockquote>
<p>&#xB2E4;&#xC74C;&#xC740; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC640; &#xC2A4;&#xB808;&#xB4DC;&#xB97C; &#xAC01;&#xAC01; 10,000 &#xAC1C;&#xC529; &#xC0DD;&#xC131;&#xD588;&#xC744; &#xB54C; &#xC2DC;&#xAC04;&#xC774; &#xC5BC;&#xB9C8;&#xB098; &#xAC78;&#xB9AC;&#xB294;&#xC9C0;
&#xBE44;&#xAD50;&#xD574;&#xBCF4;&#xB294; &#xAC83;&#xC778;&#xB370;&#xC694;.
&#xACB0;&#xACFC;&#xB97C; &#xBCF4;&#xBA74; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; &#xC2A4;&#xB808;&#xB4DC;&#xC5D0; &#xBE44;&#xD574; &#xB450;&#xBC30; &#xC815;&#xB3C4; &#xC2DC;&#xAC04;&#xC774; &#xAC78;&#xB9AC;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-c"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span>        <span class="hljs-comment">// &#xD504;&#xB85C;&#xC138;&#xC2A4; &#xC0DD;&#xC131;&#xC744; &#xC704;&#xD55C; &#xCF54;&#xB4DC;</span>
</span>{
    <span class="hljs-keyword">int</span> num = argc &gt; <span class="hljs-number">1</span> ? atoi(argv[<span class="hljs-number">1</span>]) : <span class="hljs-number">1</span>;

    <span class="hljs-keyword">pid_t</span> childpid;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= num; i++) {
        childpid = fork();
        <span class="hljs-keyword">if</span> (childpid == <span class="hljs-number">0</span>) <span class="hljs-keyword">break</span>;
    }

    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;PID : %d\n&quot;</span>, getpid());
}
----------------------------------------------------

&lt; &#xD504;&#xB85C;&#xC138;&#xC2A4; &gt;                             &lt; &#xC2A4;&#xB808;&#xB4DC; &gt;

$ time ./a.out <span class="hljs-number">10000</span>                   $ time ./a.out <span class="hljs-number">10000</span> 
. . .                                  . . .
. . .                                  . . .
PID : <span class="hljs-number">1746250</span>                          TID : <span class="hljs-number">1806529</span>
PID : <span class="hljs-number">1746251</span>                          TID : <span class="hljs-number">1806530</span>
PID : <span class="hljs-number">1746252</span>                          TID : <span class="hljs-number">1806531</span>
PID : <span class="hljs-number">1746253</span>                          TID : <span class="hljs-number">1806532</span>
PID : <span class="hljs-number">1736253</span>                          TID : <span class="hljs-number">1806533</span>

real    <span class="hljs-number">0</span>m0<span class="hljs-number">.543</span>s                       real    <span class="hljs-number">0</span>m0<span class="hljs-number">.236</span>s
user    <span class="hljs-number">0</span>m0<span class="hljs-number">.004</span>s                       user    <span class="hljs-number">0</span>m0<span class="hljs-number">.033</span>s
sys     <span class="hljs-number">0</span>m0<span class="hljs-number">.538</span>s                       sys     <span class="hljs-number">0</span>m0<span class="hljs-number">.376</span>s
</code></pre>
<p>&#xBA54;&#xBAA8;&#xB9AC; &#xC0AC;&#xC6A9;&#xB7C9;&#xB3C4; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xAC00; 1G &#xC2A4;&#xB808;&#xB4DC;&#xAC00; 330M &#xB85C; &#xC138;&#xBC30; &#xC815;&#xB3C4; &#xCC28;&#xC774;&#xAC00; &#xB0A9;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-c"><span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span>                   //  &#xD504;&#xB85C;&#xC138;&#xC2A4;</span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> COMMAND <span class="hljs-string">&quot;sed -En &apos;/MemAvail/{ s/([0-9]+)|./\\1/g; p; Q }&apos; /proc/meminfo&quot;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GET_MEM_SIZE</span><span class="hljs-params">(size_t *var)</span> 
</span>{
    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">15</span>];
    FILE *fp = popen(COMMAND, <span class="hljs-string">&quot;r&quot;</span>);
    *var = atoi(fgets(buf, <span class="hljs-keyword">sizeof</span> buf, fp));
    pclose(fp);
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> 
</span>{
    <span class="hljs-keyword">int</span> num = argc &gt; <span class="hljs-number">1</span> ? atoi(argv[<span class="hljs-number">1</span>]) : <span class="hljs-number">1</span>;

    <span class="hljs-keyword">size_t</span> size1, size2;
    GET_MEM_SIZE(&amp;size1);

    <span class="hljs-keyword">pid_t</span> childpid;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= num; i++) {
        childpid = fork();
        <span class="hljs-keyword">if</span> (childpid == <span class="hljs-number">0</span>) pause();
    }

    GET_MEM_SIZE(&amp;size2);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%zd KB\n&quot;</span>, size1 - size2);
    kill(<span class="hljs-number">0</span>, SIGTERM);
}
--------------------------------------------------------------

<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdlib.h&gt;</span>                   //  &#xC2A4;&#xB808;&#xB4DC; </span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;pthread.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;unistd.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;signal.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdio.h&gt;</span></span>
<span class="hljs-preprocessor">#<span class="hljs-keyword">include</span> <span class="hljs-string">&lt;stdint.h&gt;</span></span>

<span class="hljs-preprocessor">#<span class="hljs-keyword">define</span> COMMAND <span class="hljs-string">&quot;sed -En &apos;/MemAvail/{ s/([0-9]+)|./\\1/g; p; Q }&apos; /proc/meminfo&quot;</span></span>

<span class="hljs-function"><span class="hljs-keyword">void</span> <span class="hljs-title">GET_MEM_SIZE</span><span class="hljs-params">(size_t *var)</span> 
</span>{
    <span class="hljs-keyword">char</span> buf[<span class="hljs-number">15</span>];
    FILE *fp = popen(COMMAND, <span class="hljs-string">&quot;r&quot;</span>);
    *var = atoi(fgets(buf, <span class="hljs-keyword">sizeof</span> buf, fp));
    pclose(fp);
}

<span class="hljs-function"><span class="hljs-keyword">void</span> *<span class="hljs-title">runfunc</span><span class="hljs-params">(<span class="hljs-keyword">void</span> *arg)</span>
</span>{
    pause();
}

<span class="hljs-function"><span class="hljs-keyword">int</span> <span class="hljs-title">main</span><span class="hljs-params">(<span class="hljs-keyword">int</span> argc, <span class="hljs-keyword">char</span> *argv[])</span> 
</span>{
    <span class="hljs-keyword">int</span> num = argc &gt; <span class="hljs-number">1</span> ? atoi(argv[<span class="hljs-number">1</span>]) : <span class="hljs-number">1</span>;

    <span class="hljs-keyword">size_t</span> size1, size2;
    GET_MEM_SIZE(&amp;size1);

    <span class="hljs-keyword">pthread_t</span> thread;
    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span>; i &lt;= num; i++)
        pthread_create(&amp;thread, <span class="hljs-literal">NULL</span>, runfunc, (<span class="hljs-keyword">void</span> *)(<span class="hljs-keyword">uintptr_t</span>) i);

    GET_MEM_SIZE(&amp;size2);
    <span class="hljs-built_in">printf</span>(<span class="hljs-string">&quot;%zd KB\n&quot;</span>, size1 - size2);
    kill(getpid(), SIGTERM);
}
----------------------------------------------------------------

&lt; &#xD504;&#xB85C;&#xC138;&#xC2A4; &gt;                                  &lt; &#xC2A4;&#xB808;&#xB4DC; &gt;

$ ./a.out <span class="hljs-number">10000</span>                             $ ./a.out <span class="hljs-number">10000</span> 
<span class="hljs-number">1075408</span> KB                                  <span class="hljs-number">332120</span> KB
Terminated                                  Terminated
</code></pre>
<h2 id="ltrace">ltrace</h2>
<p>ltrace &#xB294; dynamic library calls &#xC744; &#xD2B8;&#xB808;&#xC774;&#xC2A4; &#xD560; &#xC218; &#xC788;&#xB294; &#xBA85;&#xB839;&#xC785;&#xB2C8;&#xB2E4;.
( &#xADF8;&#xB7EC;&#xBBC0;&#xB85C; static &#xC73C;&#xB85C; &#xBE4C;&#xB4DC;&#xB41C; &#xC2E4;&#xD589;&#xD30C;&#xC77C;&#xC740; &#xC548;&#xB429;&#xB2C8;&#xB2E4;.)
&#xC0AC;&#xC6A9;&#xBC29;&#xBC95;&#xC740; strace &#xC640; &#xBE44;&#xC2B7;&#xD558;&#xACE0; <code>-S</code> &#xC635;&#xC158;&#xC744; &#xC774;&#xC6A9;&#xD558;&#xBA74; system calls &#xB3C4; &#xD568;&#xAED8; &#xBCF4;&#xC5EC;&#xC90D;&#xB2C8;&#xB2E4;.</p>
<p><a href="https://ellexus.com/wp-content/uploads/2011/11/system1.png" target="_blank"><img src="images/ltrace1.png" alt=""></a></p>
<pre><code class="lang-bash">$ file ./hello
./hello: ELF <span class="hljs-number">64</span>-bit LSB shared object, x86-<span class="hljs-number">64</span>, version <span class="hljs-number">1</span> (SYSV), dynamically linked,
interpreter /lib64/ld-linux-x86-<span class="hljs-number">64</span>.so.<span class="hljs-number">2</span>, <span class="hljs-keyword">for</span> GNU/Linux <span class="hljs-number">3.2</span>.<span class="hljs-number">0</span>, BuildID[sha1]=<span class="hljs-number">1971</span>f93bf98c6e51994dcf0079aef9c37ad6a512, not stripped

<span class="hljs-comment"># hello &#xBA85;&#xB839; &#xC2E4;&#xD589;&#xC2DC; main &#xD568;&#xC218;&#xAC00; &#xD638;&#xCD9C;&#xB418;&#xAE30; &#xC804;&#xC5D0; &#xC5EC;&#xB7EC; &#xAC1C;&#xC758; &#xCD08;&#xAE30;&#xD654; &#xD568;&#xC218;&#xAC00; &#xD638;&#xCD9C;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</span>
$ ltrace -n3 -x+ ./hello
__libc_start_main@libc.so.<span class="hljs-number">6</span>(<span class="hljs-number">0</span>x55575102377a, <span class="hljs-number">1</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>28, <span class="hljs-number">0</span>x5557510237c0 &lt;unfinished ...&gt;
   __cxa_atexit@libc.so.<span class="hljs-number">6</span>(<span class="hljs-number">0</span>x7f6cc35e1ee0, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>x5557510237c0) = <span class="hljs-number">0</span>
   __libc_csu_init(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>28, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span> &lt;unfinished ...&gt;
      _init(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>28, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>
      frame_dummy(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>28, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span> &lt;unfinished ...&gt;
         register_tm_clones(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>28, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>
      &lt;... frame_dummy resumed&gt; )                = <span class="hljs-number">0</span>
   &lt;... __libc_csu_init resumed&gt; )               = <span class="hljs-number">0</span>
   _setjmp@libc.so.<span class="hljs-number">6</span>(<span class="hljs-number">0</span>x7fffd832fb70, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span> &lt;unfinished ...&gt;
      __sigsetjmp@libc.so.<span class="hljs-number">6</span>(<span class="hljs-number">0</span>x7fffd832fb70, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span>) = <span class="hljs-number">0</span>
   &lt;... _setjmp resumed&gt; )                       = <span class="hljs-number">0</span>
   main(<span class="hljs-number">1</span>, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>28, <span class="hljs-number">0</span>x7fffd832<span class="hljs-built_in">fc</span>38, <span class="hljs-number">0</span> &lt;unfinished ...&gt;     <span class="hljs-comment"># &lt;---- main &#xD568;&#xC218;</span>
      puts(<span class="hljs-string">&quot;main start...&quot;</span> &lt;unfinished ...&gt;
. . . .
. . . .
---------------------------------------------------------------------

<span class="hljs-comment"># static &#xC73C;&#xB85C; &#xBE4C;&#xB4DC; &#xB41C; &#xD30C;&#xC77C;&#xC740; trace &#xD560; &#xC218; &#xC5C6;&#xB2E4;.</span>
$ file ./hello_static
./hello_static: ELF <span class="hljs-number">64</span>-bit LSB executable, x86-<span class="hljs-number">64</span>, version <span class="hljs-number">1</span> (GNU/Linux), statically linked,
<span class="hljs-keyword">for</span> GNU/Linux <span class="hljs-number">3.2</span>.<span class="hljs-number">0</span>, BuildID[sha1]=<span class="hljs-number">994</span>ac8a4bba02287fbc2f1eb8aa481d9aec35ade, not stripped

$ ltrace -n3 -x+ ./hello_static
Couldn<span class="hljs-string">&apos;t find .dynsym or .dynstr in &quot;/proc/14338/exe&quot;
hello world
</span></code></pre>
<h3 id="strace-&#xCD9C;&#xB825;&#xC744;-&#xBCF4;&#xAE30;&#xC704;&#xD55C;-&#xC124;&#xC815;">strace &#xCD9C;&#xB825;&#xC744; &#xBCF4;&#xAE30;&#xC704;&#xD55C; &#xC124;&#xC815;</h3>
<p>strace &#xCD9C;&#xB825;&#xC744; &#xD558;&#xC774;&#xB77C;&#xC774;&#xD2B8; &#xD574;&#xC11C; &#xBCF4;&#xB824;&#xBA74; <code>vim</code> &#xB610;&#xB294; <code>bat</code> &#xBA85;&#xB839;&#xC744; &#xC774;&#xC6A9;&#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xD30C;&#xC77C;&#xC758; &#xD655;&#xC7A5;&#xC790;&#xAC00; <code>.strace</code> &#xC774;&#xBA74; &#xC790;&#xB3D9;&#xC73C;&#xB85C; strace &#xCD9C;&#xB825; &#xD30C;&#xC77C;&#xB85C; &#xC778;&#xC2DD;&#xD558;&#xB294;&#xB370;
&#xD30C;&#xC774;&#xD504;&#xC5D0;&#xC11C; &#xC77D;&#xC5B4;&#xB4E4;&#xC77C; &#xB54C;&#xB294; &#xD655;&#xC7A5;&#xC790;&#xB97C; &#xC54C; &#xC218; &#xC5C6;&#xC73C;&#xBBC0;&#xB85C; &#xB2E4;&#xC74C;&#xACFC; &#xAC19;&#xC774; &#xD574;&#xC57C; &#xB429;&#xB2C8;&#xB2E4;.</p>
<blockquote>
<p>bat &#xBA85;&#xB839;: <a href="https://github.com/sharkdp/bat" target="_blank">https://github.com/sharkdp/bat</a></p>
</blockquote>
<pre><code class="lang-bash">$ <span class="hljs-built_in">alias</span> bat=<span class="hljs-string">&apos;bat --theme ansi -S -p&apos;</span>

$ strace date <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &gt; /dev/null | bat <span class="hljs-operator">-l</span> strace

$ <span class="hljs-built_in">alias</span> vi-strace=<span class="hljs-string">&apos;vi -c &quot;set ft=strace&quot;&apos;</span>

$ strace date <span class="hljs-number">2</span>&gt;&amp;<span class="hljs-number">1</span> &gt; /dev/null | vi-strace -
</code></pre>
<h1 id="quiz">Quiz</h1>
<p>&#xBA85;&#xB839;&#xC744; &#xC2E4;&#xD589;&#xD560; &#xB54C; &#xD574;&#xB2F9; &#xBA85;&#xB839;&#xC774; &#xC5B4;&#xB290; &#xB514;&#xB809;&#xD1A0;&#xB9AC;&#xC5D0;&#xC11C; &#xC5B4;&#xB5A4; &#xD30C;&#xC77C;&#xC744; &#xC0DD;&#xC131;&#xD558;&#xB294;&#xC9C0;
&#xB610;&#xB294; &#xC5B4;&#xB5A4; &#xD30C;&#xC77C;&#xC744; &#xC77D;&#xACE0; &#xC4F0;&#xB294;&#xC9C0; &#xAD81;&#xAE08;&#xD560; &#xB54C;&#xAC00; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;. &#xC5B4;&#xB5BB;&#xAC8C; &#xC54C;&#xC544;&#xBCFC; &#xC218; &#xC788;&#xC744;&#xAE4C;&#xC694;?</p>
<pre><code class="lang-sh">$ strace <span class="hljs-operator">-e</span> %file <span class="hljs-operator">-f</span> npx http-server <span class="hljs-number">2</span>&gt; npx.strace

$ bat npx.strace
</code></pre>
<p>&#xB2E4;&#xC74C;&#xC740; <code>fatrace</code> &#xBA85;&#xB839;&#xC744; &#xC774;&#xC6A9;&#xD558;&#xB294; &#xBC29;&#xBC95;&#xC785;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-sh">$ sudo apt install fatrace

<span class="hljs-comment"># terminal 1 &#xC5D0;&#xC11C; &#xB2E4;&#xC74C; &#xBA85;&#xB839; &#xC2E4;&#xD589; </span>
$ sudo fatrace -C npx

<span class="hljs-comment"># terminal 2 &#xC5D0;&#xC11C; npx &#xBA85;&#xB839; &#xC2E4;&#xD589;</span>
$ npx http-server
</code></pre>
<h1 id="2-">2 .</h1>
<p>&#xD2B9;&#xC815; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C; &#xD568;&#xC218;&#xAC00; &#xC2DC;&#xC2A4;&#xD15C; &#xC131;&#xB2A5;&#xC5D0; &#xC601;&#xD5A5;&#xC744; &#xC904; &#xC815;&#xB3C4;&#xB85C; frequently &#xC0AC;&#xC6A9;&#xB420; &#xACBD;&#xC6B0; 
shared library &#xD615;&#xD0DC;&#xB85C; &#xC81C;&#xACF5;&#xD558;&#xC5EC; &#xC624;&#xBC84;&#xD5E4;&#xB4DC;&#xB97C; &#xC904;&#xC774;&#xB294; &#xBC29;&#xBC95;&#xC774; vDSO ( virtual dynamic shared object ) &#xC785;&#xB2C8;&#xB2E4;.
&#xB530;&#xB77C;&#xC11C; &#xBAA8;&#xB4E0; &#xC2E4;&#xD589; &#xC911;&#xC778; &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC5D0;&#xB294; &#xCEE4;&#xB110;&#xC5D0; &#xC758;&#xD574; vDSO &#xAC00; &#xC790;&#xB3D9;&#xC73C;&#xB85C; &#xB9F5;&#xD551;&#xB418;&#xB294;&#xB370;&#xC694;.
&#xC5EC;&#xAE30;&#xC5D0;&#xB294; &#xC5B4;&#xB5A4; &#xD568;&#xC218;&#xB4E4;&#xC774; &#xB4E4;&#xC5B4;&#xC788;&#xC744;&#xAE4C;&#xC694;?</p>
<p>vDSO &#xB294; ELF &#xD615;&#xC2DD;&#xC758; &#xC774;&#xBBF8;&#xC9C0; &#xC774;&#xBBC0;&#xB85C; binutils &#xD328;&#xD0A4;&#xC9C0;&#xC5D0; &#xD3EC;&#xD568;&#xB41C; &#xBA85;&#xB839;&#xC744; &#xC774;&#xC6A9;&#xD574; &#xC870;&#xD68C;&#xD574; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</p>
<pre><code class="lang-bash"><span class="hljs-comment"># &#xBA3C;&#xC800; &#xD604;&#xC7AC; bash &#xD504;&#xB85C;&#xC138;&#xC2A4;&#xC758; &#xBA54;&#xBAA8;&#xB9AC; &#xB9F5;&#xC744; &#xC870;&#xD68C;&#xD574; &#xB364;&#xD504;&#xD560; &#xC8FC;&#xC18C;&#xB97C; &#xAD6C;&#xD569;&#xB2C8;&#xB2E4;.</span>
$ grep vdso /proc/$$/maps
<span class="hljs-number">7</span>ffebb5ce000-<span class="hljs-number">7</span>ffebb5cf000 r-xp <span class="hljs-number">00000000</span> <span class="hljs-number">00</span>:<span class="hljs-number">00</span> <span class="hljs-number">0</span>                          [vdso]

<span class="hljs-comment"># gdb &#xC758; dump memory &#xBA85;&#xB839;&#xC744; &#xC774;&#xC6A9;&#xD574; vdso.dump &#xD30C;&#xC77C;&#xB85C; &#xB364;&#xD504;</span>
$ gdb -p $$ -batch -ex <span class="hljs-string">&quot;dump memory vdso.dump 0x7ffebb5ce000 0x7ffebb5cf000&quot;</span> &amp;&gt; /dev/null  

<span class="hljs-comment"># &#xB610;&#xB294; /proc/$$/mem &#xC744; &#xC774;&#xC6A9;&#xD574; &#xB364;&#xD504;</span>
$ <span class="hljs-built_in">echo</span> $(( <span class="hljs-number">0</span>x7ffebb5ce000 - <span class="hljs-number">0</span>x7ffebb5cf000 ))
-<span class="hljs-number">4096</span>
$ dd skip=$((<span class="hljs-number">0</span>x7ffebb5ce000)) bs=<span class="hljs-number">1</span> count=<span class="hljs-number">4096</span> <span class="hljs-keyword">if</span>=/proc/$$/mem &gt; vdso.dump

<span class="hljs-comment"># &#xB364;&#xD504;&#xD55C; &#xC774;&#xBBF8;&#xC9C0;&#xB294; ELF64 shared object &#xD615;&#xC2DD;&#xC778; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.</span>
$ file vdso.dump
vdso.dump: ELF <span class="hljs-number">64</span>-bit LSB shared object, x86-<span class="hljs-number">64</span>, version <span class="hljs-number">1</span> (SYSV), dynamically linked,
BuildID[sha1]=<span class="hljs-number">3</span>c0ad65980305f977b70a29f7fbf8c71798d79b9, stripped

<span class="hljs-comment"># &#xD568;&#xC218; &#xC774;&#xB984; &#xC55E;&#xC5D0; __vdso_ &#xAC00; &#xBD99;&#xC740;&#xAC8C; &#xC788;&#xACE0; &#xC5C6;&#xB294;&#xAC8C; &#xC788;&#xB294;&#xB370; &#xC55E;&#xC758; &#xC8FC;&#xC18C;&#xAC12;&#xC744; &#xBE44;&#xAD50;&#xD574;&#xBCF4;&#xBA74; &#xB3D9;&#xC77C;&#xD569;&#xB2C8;&#xB2E4;.</span>
<span class="hljs-comment"># &#xB2E4;&#xC2DC; &#xB9D0;&#xD574;&#xC11C; clock_gettime &#xC740; __vdso_clock_gettime &#xC758; alias &#xAC00; &#xB418;&#xB294; &#xC148;&#xC785;&#xB2C8;&#xB2E4;.</span>
$ nm -D vdso.dump
<span class="hljs-number">0000000000000000</span> A LINUX_2.<span class="hljs-number">6</span>
<span class="hljs-number">0000000000000990</span> T __vdso_clock_getres
<span class="hljs-number">00000000000008</span>e0 T __vdso_clock_gettime
<span class="hljs-number">00000000000009</span>a0 T __vdso_getcpu
<span class="hljs-number">0000000000000840</span> T __vdso_gettimeofday
<span class="hljs-number">00000000000008</span>d0 T __vdso_time
<span class="hljs-number">0000000000000990</span> W clock_getres
<span class="hljs-number">00000000000008</span>e0 W clock_gettime            <span class="hljs-comment"># &quot;W&quot; &#xB294; Weak symbol &#xC744; &#xB098;&#xD0C0;&#xB0C4;</span>
<span class="hljs-number">00000000000009</span>a0 W getcpu
<span class="hljs-number">0000000000000840</span> W gettimeofday
<span class="hljs-number">00000000000008</span>d0 W time
</code></pre>
<h1 id="3-">3 .</h1>
<p>&#xADF8;&#xB798;&#xD53D;&#xCE74;&#xB4DC;, &#xC0AC;&#xC6B4;&#xB4DC;, &#xB9C8;&#xC6B0;&#xC2A4; &#xAC19;&#xC740; &#xC7A5;&#xCE58;&#xB4E4;&#xC740; &#xB2E4;&#xB978; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C;&#xC744; &#xC0AC;&#xC6A9;&#xD560;&#xAE4C;&#xC694;?  </p>
<p>&#xBAA8;&#xB450; &#xAC19;&#xC740; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C;&#xC744; &#xC0AC;&#xC6A9;&#xD569;&#xB2C8;&#xB2E4;.
/dev &#xB514;&#xB809;&#xD1A0;&#xB9AC;&#xC5D0; &#xC788;&#xB294; &#xC7A5;&#xCE58; &#xD30C;&#xC77C;&#xB4E4;&#xC744; <code>ls -l</code> &#xD574; &#xBCF4;&#xBA74; &#xD30C;&#xC77C; &#xC0AC;&#xC774;&#xC988; &#xB300;&#xC2E0;&#xC5D0; &#xB450;&#xAC1C;&#xC758; &#xC22B;&#xC790;&#xAC00; <code>,</code> &#xB85C;
&#xAD6C;&#xBD84;&#xB418;&#xC5B4; &#xD45C;&#xC2DC;&#xB418;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xAC01;&#xAC01; major number, minor number &#xB77C;&#xACE0; &#xD558;&#xB294;&#xB370; &#xD30C;&#xC77C;&#xC744; open &#xD588;&#xC744;&#xB54C; 
&#xC774; &#xBC88;&#xD638;&#xB85C; &#xCEE4;&#xB110;&#xC740; &#xC5B4;&#xB5A4; &#xC7A5;&#xCE58; &#xB4DC;&#xB77C;&#xC774;&#xBC84;&#xB97C; &#xC0AC;&#xC6A9;&#xD574;&#xC57C; &#xB420;&#xC9C0; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xD130;&#xBBF8;&#xB110; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC744; &#xBA87;&#xAC1C; &#xC624;&#xD508;&#xD55C;&#xB4A4; <code>ls -l /dev/pts/</code> &#xD574;&#xBCF4;&#xBA74; &#xC7A5;&#xCE58; &#xD30C;&#xC77C;&#xB4E4;&#xC774; &#xC0C8;&#xB85C; &#xC0DD;&#xC131;&#xB41C;&#xAC78; &#xBCFC; &#xC218; &#xC788;&#xB294;&#xB370;
minor number &#xAC00; &#xBAA8;&#xB450; &#xB2E4;&#xB978; &#xAC83;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774;&#xB807;&#xAC8C; minor number &#xB294; &#xAC19;&#xC740; &#xC7A5;&#xCE58; &#xB4DC;&#xB77C;&#xC774;&#xBC84;&#xB97C; &#xC0AC;&#xC6A9;&#xD558;&#xC9C0;&#xB9CC; &#xAD6C;&#xBD84;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xC6A9;&#xB3C4;&#xB85C; &#xC0AC;&#xC6A9;&#xB429;&#xB2C8;&#xB2E4;.</p>
<blockquote>
<p>&#xB9C8;&#xC6B0;&#xC2A4; : /dev/input/ ( &#xB9C8;&#xC6B0;&#xC2A4;&#xB97C; &#xCEF4;&#xD4E8;&#xD130;&#xC5D0; &#xC5F0;&#xACB0;&#xD558;&#xBA74; mouse &#xC7A5;&#xCE58; &#xD30C;&#xC77C;&#xC774; &#xC0DD;&#xAE30;&#xB294; &#xAC83;&#xC744; &#xBCFC; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4; )<br>&#xADF8;&#xB798;&#xD53D; : /dev/dri/<br>&#xC0AC;&#xC6B4;&#xB4DC; : /dev/snd/  </p>
</blockquote>
<p>&#xADF8;&#xB798;&#xD53D; &#xAC19;&#xC740; &#xACBD;&#xC6B0; &#xC2DC;&#xC2A4;&#xD15C;&#xCF5C;&#xC744; wrap &#xD574;&#xC11C; &#xC81C;&#xACF5;&#xD558;&#xB294; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;&#xAC00; libdrm ( /usr/lib/x86_64-linux-gnu/libdrm* ) &#xC785;&#xB2C8;&#xB2E4;.
&#xADF8;&#xB7EC;&#xB2C8;&#xAE4C; &#xC720;&#xC800;&#xBAA8;&#xB4DC;&#xC5D0;&#xC11C; &#xC0AC;&#xC6A9;&#xD560; &#xC218; &#xC788;&#xB294; &#xAC00;&#xC7A5; &#xC800;&#xC218;&#xC900;&#xC758; &#xADF8;&#xB798;&#xD53D; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;&#xAC00; libdrm &#xC774;&#xB77C;&#xACE0; &#xD560; &#xC218; &#xC788;&#xC2B5;&#xB2C8;&#xB2E4;.
&#xC774; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;&#xB97C; &#xC774;&#xC6A9;&#xD574; openGL &#xAC19;&#xC740; &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;&#xB97C; &#xB9CC;&#xB4E4;&#xACE0; &#xC0AC;&#xC6A9;&#xC790;&#xB294; openGL &#xB77C;&#xC774;&#xBE0C;&#xB7EC;&#xB9AC;&#xB97C; &#xC774;&#xC6A9;&#xD558;&#xC5EC;
&#xC5B4;&#xD50C;&#xB9AC;&#xCF00;&#xC774;&#xC158; &#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC744; &#xC81C;&#xC791;&#xD558;&#xAC8C; &#xB429;&#xB2C8;&#xB2E4;.</p>
<p><a href="https://en.wikipedia.org/wiki/File:Linux_API.svg" target="_blank"><img src="images/Linux_API2.png" alt=""></a></p>
<h1 id="4">4.</h1>
<p>&#xD504;&#xB85C;&#xADF8;&#xB7A8;&#xC744; &#xC2E4;&#xD589;&#xD558;&#xAE30; &#xC704;&#xD55C; &#xD544;&#xC694;&#xC870;&#xAC74;&#xC73C;&#xB85C; &#xD2B9;&#xC815; &#xBC84;&#xC804; &#xC774;&#xC0C1;&#xC758; GLIBC &#xAC00; &#xC694;&#xAD6C;&#xB418;&#xB294; &#xACBD;&#xC6B0;&#xAC00; &#xC788;&#xB294;&#xB370;&#xC694;.
&#xC5B4;&#xB5BB;&#xAC8C; &#xD558;&#xBA74; &#xD604;&#xC7AC; &#xC2DC;&#xC2A4;&#xD15C;&#xC5D0; &#xC124;&#xCE58;&#xB41C; &#xBC84;&#xC804;&#xC744; &#xC54C; &#xC218; &#xC788;&#xC744;&#xAE4C;&#xC694;?</p>
<pre><code class="lang-bash">$ ldd --version | head -<span class="hljs-number">1</span>
ldd (Ubuntu GLIBC <span class="hljs-number">2.36</span>-<span class="hljs-number">0</span>ubuntu4) <span class="hljs-number">2.36</span>

$ /lib64/ld-linux-x86-<span class="hljs-number">64</span>.so.<span class="hljs-number">2</span> --version | head -<span class="hljs-number">1</span>
ld.so (Ubuntu GLIBC <span class="hljs-number">2.36</span>-<span class="hljs-number">0</span>ubuntu4) stable release version <span class="hljs-number">2.36</span>.
</code></pre>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./closing.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page: 맺음말"><i class="fa fa-angle-left"></i></a>
        
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
